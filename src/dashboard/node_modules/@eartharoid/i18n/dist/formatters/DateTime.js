const pseudo_setter_keys = [
    'calendar',
    'numberingSystem',
    'hourCycle',
    'timeZone',
    'weekday',
    'era',
    'year',
    'month',
    'day',
    'dayPeriod',
    'hour',
    'minute',
    'second',
    'fractionalSecondDigits',
    'timeZoneName',
    'dateStyle',
    'timeStyle',
];
const pseudo_setters = pseudo_setter_keys
    .reduce((acc, key) => {
    acc[key] = function (value) {
        this.options[key] = value;
        return this;
    };
    return acc;
}, {});
function DateTimeFormat(locales) {
    return (value = new Date(), options = {}) => {
        const factory = {
            locales,
            options,
            value,
            date() {
                this.styleModifier = 'dateStyle';
                return this;
            },
            time() {
                this.styleModifier = 'timeStyle';
                return this;
            },
            h11() {
                this.options.hourCycle = 'h11';
                return this;
            },
            h12() {
                this.options.hourCycle = 'h12';
                return this;
            },
            h23() {
                this.options.hourCycle = 'h23';
                return this;
            },
            h24() {
                this.options.hourCycle = 'h24';
                return this;
            },
            full() {
                if (this.styleModifier === undefined)
                    throw new Error('`full()` must be preceded by a `date()` or `time()` modifier');
                this.options[this.styleModifier] = 'full';
                return this;
            },
            long() {
                if (this.styleModifier === undefined)
                    throw new Error('`full()` must be preceded by a `date()` or `time()` modifier');
                this.options[this.styleModifier] = 'long';
                return this;
            },
            medium() {
                if (this.styleModifier === undefined)
                    throw new Error('`full()` must be preceded by a `date()` or `time()` modifier');
                this.options[this.styleModifier] = 'medium';
                return this;
            },
            short() {
                if (this.styleModifier === undefined)
                    throw new Error('`full()` must be preceded by a `date()` or `time()` modifier');
                this.options[this.styleModifier] = 'short';
                return this;
            },
            get result() {
                const formatter = new Intl.DateTimeFormat(this.locales, this.options);
                if (this.value instanceof Array)
                    return formatter.formatRange(...this.value);
                else
                    return formatter.format(this.value);
            },
        };
        return Object.assign(factory, pseudo_setters);
    };
}
export default DateTimeFormat;
