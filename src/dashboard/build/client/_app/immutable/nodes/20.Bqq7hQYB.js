import{e as ye}from"../chunks/Cxx9n8vM.js";import"../chunks/Bzak7iHL.js";import{o as ke}from"../chunks/BAc9Nw6w.js";import{aU as we,p as Be,U as Ue,i as a,h as M,t as w,aY as Ae,aV as h,a as c,b as je,c as r,r as o,aZ as ze,j as ae,s as i,f as v,d as B,g as d,u as Ie}from"../chunks/CWXCXDbJ.js";import{s as N}from"../chunks/BTVB6o0Y.js";import{i as x}from"../chunks/BnKh12PZ.js";import{r as Se,s as re}from"../chunks/DNgBoiT1.js";import{b as oe}from"../chunks/C43HmXkP.js";import{p as Ce}from"../chunks/r2wwZTEc.js";import{s as Pe,a as Te}from"../chunks/DeGpVRd_.js";import{p as Me}from"../chunks/DacYZeem.js";import{b as Ne}from"../chunks/q3P-UJff.js";import{E as Ee}from"../chunks/CZwjNc88.js";async function Fe({fetch:U,params:u}){var n;const f=await U(`/api/admin/guilds/${u.guild}/customization`),_=(n=f.headers.get("Content-Type"))==null?void 0:n.includes("json"),b=_?await f.json():await f.text();if(!f.ok)ye(f.status,_?JSON.stringify(b):b);else return b||{}}const st=Object.freeze(Object.defineProperty({__proto__:null,load:Fe},Symbol.toStringTag,{value:"Module"}));var Je=v('<div class="mb-4 rounded-lg bg-green-100 p-4 text-green-800 dark:bg-green-500/20 dark:text-green-300"><i class="fa-solid fa-check-circle"></i> </div>'),Oe=v('<img alt="Bot Avatar" class="h-32 w-32 rounded-full border-2 border-blurple"/> <button type="button" class="rounded-lg bg-red-300 p-2 px-4 font-medium transition duration-300 hover:bg-red-500 hover:text-white dark:bg-red-500/50 dark:hover:bg-red-500 dark:hover:text-white"><i class="fa-solid fa-trash"></i> Remove Avatar</button>',1),qe=v('<div class="flex h-32 w-32 items-center justify-center rounded-full border-2 border-dashed border-gray-300 bg-gray-50 dark:border-slate-600 dark:bg-slate-800"><i class="fa-solid fa-image text-4xl text-gray-300 dark:text-slate-600"></i></div>'),De=v('<img alt="Bot Banner" class="w-full rounded-lg border-2 border-blurple object-cover" style="max-height: 200px;"/> <button type="button" class="rounded-lg bg-red-300 p-2 px-4 font-medium transition duration-300 hover:bg-red-500 hover:text-white dark:bg-red-500/50 dark:hover:bg-red-500 dark:hover:text-white"><i class="fa-solid fa-trash"></i> Remove Banner</button>',1),Ge=v('<div class="flex w-full items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 py-12 dark:border-slate-600 dark:bg-slate-800"><i class="fa-solid fa-image text-4xl text-gray-300 dark:text-slate-600"></i></div>'),Le=v('<i class="fa-solid fa-spinner animate-spin"></i>'),Re=v('<i class="fa-solid fa-save"></i>'),Ve=v(`<h1 class="m-4 text-center text-4xl font-bold">Bot Customization</h1> <div class="m-2 mx-auto max-w-lg p-4 text-lg"><!> <!> <div class="mb-8 text-center text-blue-600 dark:text-blue-400"><p class="font-semibold"><i class="fa-solid fa-info-circle"></i> Per-Server Settings</p> <p>Customize the bot's appearance for this server. These settings will override the bot's default
			appearance when it interacts in this server.</p></div> <form><div class="my-4 grid grid-cols-1 gap-8"><div><label for="botAvatarInput" class="font-medium">Bot Avatar <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Upload a custom avatar for the bot in this server (PNG, JPG, max 1MB)"></i></label> <div class="mt-2 flex flex-col items-center gap-4"><!> <input id="botAvatarInput" type="file" accept="image/*" class="max-w-xs"/></div></div> <div><label for="botUsernameInput" class="font-medium">Bot Username <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Custom username for the bot in this server (max 80 characters)"></i></label> <input id="botUsernameInput" type="text" class="input form-input mt-2" placeholder="Leave blank to use default" maxlength="80"/> <p class="mt-1 text-sm text-gray-500 dark:text-slate-400"> </p></div> <div><label for="botBioInput" class="font-medium">Bot Description <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Custom description or bio for the bot in this server"></i></label> <textarea id="botBioInput" class="input form-textarea mt-2" placeholder="Leave blank to use default description" rows="4" maxlength="500"></textarea> <p class="mt-1 text-sm text-gray-500 dark:text-slate-400"> </p></div> <div><div class="font-medium"><label for="botBannerInput">Bot Banner <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Upload a custom banner for the bot in this server (PNG, JPG, recommended 1200x600px)"></i></label></div> <div class="mt-2 flex flex-col items-center gap-4"><!> <input id="botBannerInput" type="file" accept="image/*" class="max-w-xs"/></div></div></div> <div class="mt-8 flex gap-4"><button type="submit" class="flex-1 rounded-lg bg-green-300 p-2 px-5 font-medium transition duration-300 hover:bg-green-500 hover:text-white disabled:cursor-not-allowed disabled:opacity-50 dark:bg-green-500/50 dark:hover:bg-green-500 dark:hover:text-white"><!> Save Changes</button> <a href="../general" class="flex items-center justify-center rounded-lg bg-gray-300 p-2 px-5 font-medium transition duration-300 hover:bg-gray-500 hover:text-white dark:bg-slate-600 dark:hover:bg-slate-500"><i class="fa-solid fa-arrow-left"></i> Back</a></div></form></div>`,1);function it(U,u){var Q,W,X,$;Be(u,!0);const f=()=>Te(Me,"$page",_),[_,b]=Pe();let n=B(!1),y=B(!1),m=B(null),p=B(""),s=Ue({botAvatar:((Q=u.data)==null?void 0:Q.botAvatar)||"",botBio:((W=u.data)==null?void 0:W.botBio)||"",botBanner:((X=u.data)==null?void 0:X.botBanner)||"",botUsername:(($=u.data)==null?void 0:$.botUsername)||""});Ne(e=>{d(n)&&!confirm("You have unsaved changes; are you sure you want to leave?")&&e.cancel()}),ke(()=>{window.addEventListener("beforeunload",e=>{d(n)&&(e.preventDefault(),e.returnValue="")})});const E=(e,t)=>{var ee;const l=(ee=e.target.files)==null?void 0:ee[0];if(!l)return;const g=5*1024*1024;if(l.size>g){i(m,new Error(`File size must be less than 5MB. Selected file is ${(l.size/1024/1024).toFixed(2)}MB`),!0);return}const T=new FileReader;T.onload=_e=>{var te;s[t]=(te=_e.target)==null?void 0:te.result,i(n,!0)},T.onerror=()=>{i(m,new Error("Failed to read file"),!0)},T.readAsDataURL(l)},F=e=>{s[e]="",i(n,!0)},se=async()=>{try{i(m,null),i(p,""),i(y,!0);const e=await fetch(`/api/admin/guilds/${f().params.guild}/customization`,{method:"PATCH",body:JSON.stringify(s),credentials:"include",headers:{"Content-Type":"application/json; charset=UTF-8"}}),t=await e.json();if(e.ok)i(n,!1),i(p,"Bot customization saved successfully!"),setTimeout(()=>{i(p,"")},3e3);else throw t}catch(e){i(m,e,!0),window.scroll({top:0,behavior:"smooth"})}finally{i(y,!1)}};var J=Ve(),O=a(M(J),2),q=r(O);{var ie=e=>{Ee(e,{get error(){return d(m)}})};x(q,e=>{d(m)&&e(ie)})}var D=a(q,2);{var le=e=>{var t=Je(),l=a(r(t));o(t),w(()=>N(l,` ${d(p)??""}`)),c(e,t)};x(D,e=>{d(p)&&e(le)})}var k=a(D,4),ne=Ie(()=>Ce(()=>se())),A=r(k),j=r(A),G=a(r(j),2),L=r(G);{var de=e=>{var t=Oe(),l=M(t),g=a(l,2);w(()=>re(l,"src",s.botAvatar)),h("click",g,()=>F("botAvatar")),c(e,t)},ce=e=>{var t=qe();c(e,t)};x(L,e=>{s.botAvatar?e(de):e(ce,!1)})}var ve=a(L,2);o(G),o(j);var z=a(j,2),I=a(r(z),2);Se(I);var R=a(I,2),ue=r(R);o(R),o(z);var S=a(z,2),C=a(r(S),2);ze(C);var V=a(C,2),fe=r(V);o(V),o(S);var Y=a(S,2),H=a(r(Y),2),Z=r(H);{var me=e=>{var t=De(),l=M(t),g=a(l,2);w(()=>re(l,"src",s.botBanner)),h("click",g,()=>F("botBanner")),c(e,t)},be=e=>{var t=Ge();c(e,t)};x(Z,e=>{s.botBanner?e(me):e(be,!1)})}var pe=a(Z,2);o(H),o(Y),o(A);var K=a(A,2),P=r(K),ge=r(P);{var he=e=>{var t=Le();c(e,t)},xe=e=>{var t=Re();c(e,t)};x(ge,e=>{d(y)?e(he):e(xe,!1)})}ae(),o(P),ae(2),o(K),o(k),o(O),w(()=>{var e,t;N(ue,`${(((e=s.botUsername)==null?void 0:e.length)||0)??""}/80`),N(fe,`${(((t=s.botBio)==null?void 0:t.length)||0)??""}/500`),P.disabled=!d(n)||d(y)}),Ae("submit",k,function(...e){var t;(t=d(ne))==null||t.apply(this,e)}),h("change",k,e=>{e.target.type!=="file"&&i(n,!0)}),h("change",ve,e=>E(e,"botAvatar")),oe(I,()=>s.botUsername,e=>s.botUsername=e),oe(C,()=>s.botBio,e=>s.botBio=e),h("change",pe,e=>E(e,"botBanner")),c(U,J),je(),b()}we(["change","click"]);export{it as component,st as universal};
