import{e as _l}from"../chunks/Cxx9n8vM.js";import"../chunks/Bzak7iHL.js";import{bM as yl,b2 as wl,at as xl,t as H,a as S,f as W,p as qt,bN as Ne,a1 as i,bO as sl,c as v,r as h,O as M,b as It,bL as Ut,aY as f,bP as Kt,i as y,s as V,D as He,g as a,e as xe,h as le,aT as At,u as Ue,ah as Te,ap as Sl,U as bt,d as _t,j as tt,bK as Ol}from"../chunks/_fu6EM7d.js";import{s as Ee}from"../chunks/DbFbsu9R.js";import{i as ae}from"../chunks/BkvMZOlF.js";import{e as Dt,i as nl}from"../chunks/CdfWQzPM.js";import{c as Bt,r as at,s as J,d as Cl,b as Yt}from"../chunks/BZKIRd09.js";import{c as kl}from"../chunks/CSeQqRbU.js";import{b as lt}from"../chunks/DD97wVFk.js";import{s as Tl,a as Se,p as jt}from"../chunks/r2wwZTEc.js";import{a as il,s as rl}from"../chunks/CzA9-LZ0.js";import{r as Ml}from"../chunks/BSe2IdtJ.js";import{p as Nl}from"../chunks/NesQCFKI.js";import"../chunks/69_IOA4Y.js";import{e as El}from"../chunks/DSwvs_u7.js";import{R as Al,E as Dl}from"../chunks/DZ1Z5aX_.js";import{c as jl}from"../chunks/nwo5WiIq.js";import{h as Qt}from"../chunks/BHIk14_I.js";import{s as oe,f as Ll}from"../chunks/BIkGieo7.js";import{r as $t,l as ql,a as Il}from"../chunks/B1XTWJtk.js";import{s as Me,c as el}from"../chunks/B_DfNNzh.js";import{s as Oe}from"../chunks/CG3JaKlL.js";import{b as yt}from"../chunks/ByBQdF1a.js";import{i as ol}from"../chunks/-q9SGk12.js";import{p as n,l as zt}from"../chunks/BALO3cCj.js";import{w as Ul}from"../chunks/B4e910Rm.js";function Bl(o,t){yl(window,["resize"],()=>wl(()=>t(window[o])))}function K(o,t){var d;var r=(d=o.$$events)==null?void 0:d[t.type],c=xl(r)?r.slice():r==null?[]:[r];for(var k of c)k.call(this,t)}async function zl({fetch:o,params:t}){var C;const r={credentials:"include"},c=await o(`/api/admin/guilds/${t.guild}/categories`,r),k=(C=c.headers.get("Content-Type"))==null?void 0:C.includes("json"),d=k?await c.json():await c.text();if(!c.ok)_l(c.status,k?JSON.stringify(d):d);else return{categories:d,channels:await(await o(`/api/admin/guilds/${t.guild}/data?query=channels.cache`,r)).json()}}const za=Object.freeze(Object.defineProperty({__proto__:null,load:zl},Symbol.toStringTag,{value:"Module"}));var Fl=W('<div class="svelte-avhlr7"></div>');function Pl(o,t){let r=n(t,"color",24,()=>"cornflowerblue"),c=n(t,"duration",24,()=>"1.5s"),k=n(t,"size",24,()=>"1em");var d=Fl();let C;H(()=>C=Oe(d,`--duration: ${c()??""}`,C,{"border-color":`${r()??""} transparent ${r()??""}
  ${r()??""}`,width:k(),height:k()})),S(o,d)}function tl(o){return Object.prototype.toString.call(o)==="[object Date]"}function Lt(o,t,r,c){if(typeof r=="number"||tl(r)){const k=c-r,d=(r-t)/(o.dt||1/60),C=o.opts.stiffness*k,F=o.opts.damping*d,$=(C-F)*o.inv_mass,P=(d+$)*o.dt;return Math.abs(P)<o.opts.precision&&Math.abs(k)<o.opts.precision?c:(o.settled=!1,tl(r)?new Date(r.getTime()+P):r+P)}else{if(Array.isArray(r))return r.map((k,d)=>Lt(o,t[d],r[d],c[d]));if(typeof r=="object"){const k={};for(const d in r)k[d]=Lt(o,t[d],r[d],c[d]);return k}else throw new Error(`Cannot spring ${typeof r} values`)}}function Rl(o,t={}){const r=Ul(o),{stiffness:c=.15,damping:k=.8,precision:d=.01}=t;let C,F,$,P=o,p=o,se=1,D=0,ne=!1;function ue(j,Q={}){p=j;const Be=$={};return o==null||Q.hard||U.stiffness>=1&&U.damping>=1?(ne=!0,C=$t.now(),P=j,r.set(o=p),Promise.resolve()):(Q.soft&&(D=1/((Q.soft===!0?.5:+Q.soft)*60),se=0),F||(C=$t.now(),ne=!1,F=ql(G=>{if(ne)return ne=!1,F=null,!1;se=Math.min(se+D,1);const Ae=Math.min(G-C,1e3/30),ge={inv_mass:se,opts:U,settled:!0,dt:Ae*60/1e3},ve=Lt(ge,P,o,p);return C=G,P=o,r.set(o=ve),ge.settled&&(F=null),!ge.settled})),new Promise(G=>{F.promise.then(()=>{Be===$&&G()})}))}const U={set:ue,update:(j,Q)=>ue(j(p,o),Q),subscribe:r.subscribe,stiffness:c,damping:k,precision:d};return U}var Jl=W("<span><!></span>");function Vl(o,t){qt(t,!1);const r=()=>il(ue,"$store",c),[c,k]=rl();let d=n(t,"wiggle",12,!1),C=n(t,"angle",8,0),F=n(t,"scale",8,1),$=n(t,"dx",8,0),P=n(t,"dy",8,0),p=n(t,"duration",8,200),se=n(t,"stiffness",8,.05),D=n(t,"damping",8,.1),ne={angle:0,scale:1,dx:0,dy:0},ue=Rl(ne,{stiffness:se(),damping:D()});Ne(()=>(i(d()),i(p())),()=>{d()&&setTimeout(()=>d(!1),p())}),Ne(()=>(i(d()),i(F()),i(C()),i($()),i(P())),()=>{ue.set(d()?{scale:F(),angle:C(),dx:$(),dy:P()}:ne)}),sl(),ol();var U=Jl();let j;var Q=v(U);oe(Q,t,"default",{},null),h(U),H(()=>j=Oe(U,"",j,{transform:`rotate(${r(),M(()=>r().angle)??""}deg) scale(${r(),M(()=>r().scale)??""}) translate(${r(),M(()=>r().dx)??""}px,
  ${r(),M(()=>r().dy)??""}px)`})),S(o,U),It(),k()}var Hl=Ut('<svg><path d="M3.646 9.146a.5.5 0 0 1 .708 0L8 12.793l3.646-3.647a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 0-.708zm0-2.292a.5.5 0 0 0 .708 0L8 3.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708z"></path></svg>');function Wl(o,t){const r=zt(t,["children","$$slots","$$events","$$legacy"]);var c=Hl();Bt(c,()=>({...r,fill:"currentColor",viewBox:"0 0 16 16"})),S(o,c)}var Gl=Ut('<svg><path d="M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"></path></svg>');function ll(o,t){const r=zt(t,["children","$$slots","$$events","$$legacy"]);var c=Gl();Bt(c,()=>({...r,viewBox:"0 0 24 24",fill:"currentColor"})),S(o,c)}var Zl=Ut('<svg><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2S2 6.477 2 12s4.477 10 10 10Zm-4.906-3.68L18.32 7.094A8 8 0 0 1 7.094 18.32ZM5.68 16.906A8 8 0 0 1 16.906 5.68L5.68 16.906Z"></path></svg>');function Xl(o,t){const r=zt(t,["children","$$slots","$$events","$$legacy"]);var c=Zl();Bt(c,()=>({...r,viewBox:"0 0 24 24",fill:"currentColor"})),S(o,c)}const I=o=>o instanceof Object?(o.label===void 0&&console.error(`MultiSelect option ${JSON.stringify(o)} is an object but has no label key`),o.label):`${o}`;function wt(o,t=null){let r="";if(["selected","option",null].includes(t)||console.error(`MultiSelect: Invalid key=${t} for get_style`),typeof o=="object"&&o.style&&(typeof o.style=="string"&&(r=o.style),typeof o.style=="object")){if(t&&t in o.style)return o.style[t]??"";console.error(`Invalid style object for option=${JSON.stringify(o)}`)}return r.trim()&&!r.trim().endsWith(";")&&(r+=";"),r}var Kl=W('<button type="button" class="remove svelte-1dct8e3"><!></button>'),Yl=W('<li role="option" aria-selected="true"><!> <!></li>'),Ql=W("<span> </span>"),$l=W('<button type="button" class="remove remove-all svelte-1dct8e3"><!></button>'),ea=W("<!> <!>",1),ta=W('<li role="option" aria-selected="false"><!></li>'),la=W('<li role="option" aria-selected="false"><!></li>'),aa=W('<ul role="listbox"><!> <!></ul>'),sa=W('<div role="searchbox" tabindex="-1"><input tabindex="-1" aria-hidden="true" aria-label="ignore this, used only to prevent form submission if select is required but empty" class="form-control svelte-1dct8e3"/> <!> <ul aria-label="selected options"><!> <input/> <!></ul> <!> <!> <!></div>');function na(o,t){var Xt;qt(t,!1);const r=He();let c=n(t,"activeIndex",12,null),k=n(t,"activeOption",12,null),d=n(t,"createOptionMsg",24,()=>"Create this option..."),C=n(t,"allowUserOptions",8,!1),F=n(t,"allowEmpty",8,!1),$=n(t,"autocomplete",24,()=>"off"),P=n(t,"autoScroll",8,!0),p=n(t,"breakpoint",8,800),se=n(t,"defaultDisabledTitle",24,()=>"This option is disabled"),D=n(t,"disabled",8,!1),ne=n(t,"disabledInputTitle",24,()=>"This input is disabled"),ue=n(t,"duplicateOptionMsg",24,()=>"This option is already selected"),U=n(t,"duplicates",8,!1),j=n(t,"key",8,e=>`${I(e)}`.toLowerCase()),Q=n(t,"filterFunc",8,(e,s)=>s?`${I(e)}`.toLowerCase().includes(s.toLowerCase()):!0),Be=n(t,"closeDropdownOnSelect",24,()=>"desktop"),G=n(t,"form_input",12,null),Ae=n(t,"highlightMatches",8,!0),ge=n(t,"id",8,null),ve=n(t,"input",12,null),xt=n(t,"inputClass",24,()=>""),We=n(t,"inputStyle",8,null),St=n(t,"inputmode",8,null),he=n(t,"invalid",12,!1),Ge=n(t,"liActiveOptionClass",24,()=>""),st=n(t,"liActiveUserMsgClass",24,()=>""),Ze=n(t,"liOptionClass",24,()=>""),ze=n(t,"liOptionStyle",8,null),nt=n(t,"liSelectedClass",24,()=>""),Xe=n(t,"liSelectedStyle",8,null),it=n(t,"liUserMsgClass",24,()=>""),Fe=n(t,"loading",8,!1),B=n(t,"matchingOptions",28,()=>[]),fe=n(t,"maxOptions",8,void 0),w=n(t,"maxSelect",8,null),Ke=n(t,"maxSelectMsg",8,(e,s)=>s>1?`${e}/${s}`:""),Ye=n(t,"maxSelectMsgClass",24,()=>""),rt=n(t,"name",8,null),me=n(t,"noMatchingOptionsMsg",24,()=>"No matching options"),ce=n(t,"open",12,!1),Z=n(t,"options",12),De=n(t,"outerDiv",12,null),Qe=n(t,"outerDivClass",24,()=>""),Pe=n(t,"parseLabelsAsHtml",8,!1),ot=n(t,"pattern",8,null),je=n(t,"placeholder",8,null),ct=n(t,"removeAllTitle",24,()=>"Remove all"),dt=n(t,"removeBtnTitle",24,()=>"Remove"),Re=n(t,"minSelect",8,null),R=n(t,"required",8,!1),Ot=n(t,"resetFilterOnAdd",8,!0),N=n(t,"searchText",28,()=>""),l=n(t,"selected",28,()=>{var e;return((e=Z())==null?void 0:e.filter(s=>s instanceof Object&&(s==null?void 0:s.preselected)).slice(0,w()??void 0))??[]}),x=n(t,"sortSelected",8,!1),L=n(t,"selectedOptionsDraggable",24,()=>!x()),pe=n(t,"style",8,null),be=n(t,"ulOptionsClass",24,()=>""),Je=n(t,"ulSelectedClass",24,()=>""),ut=n(t,"ulSelectedStyle",8,null),ft=n(t,"ulOptionsStyle",8,null),Ce=n(t,"value",12,null);const Ct=e=>{Ce(w()===1?e[0]??null:e)},mt=e=>{w()===1?l(e?[e]:[]):l(e??[])};let kt=He(!1);((Xt=Z())==null?void 0:Xt.length)>0||(C()||Fe()||D()||F()?Z([]):console.error("MultiSelect received no options")),w()!==null&&w()<1&&console.error(`MultiSelect's maxSelect must be null or positive integer, got ${w()}`),Array.isArray(l())||console.error(`MultiSelect's selected prop should always be an array, got ${l()}`),w()&&typeof R()=="number"&&R()>w()&&console.error(`MultiSelect maxSelect=${w()} < required=${R()}, makes it impossible for users to submit a valid form`),Pe()&&C()&&console.warn("Don't combine parseLabelsAsHtml and allowUserOptions. It's susceptible to XSS attacks!"),x()&&L()&&console.warn("MultiSelect's sortSelected and selectedOptionsDraggable should not be combined as any user re-orderings of selected options will be undone by sortSelected on component re-renders."),C()&&!d()&&d()!==null&&console.error(`MultiSelect has allowUserOptions=${C()} but createOptionMsg=${d()} is falsy. This prevents the "Add option" <span> from showing up, resulting in a confusing user experience.`),fe()&&(typeof fe()!="number"||fe()<0||fe()%1!=0)&&console.error(`MultiSelect's maxOptions must be undefined or a positive integer, got ${fe()}`);const _e=jl();let ke=He(!1),Ft=He();if(c()!==null&&!B()[c()])throw`Run time error, activeIndex=${c()} is out of bounds, matchingOptions.length=${B().length}`;function gt(e,s){var m,Y;w()&&w()>1&&l().length>=w()&&V(kt,!0),!isNaN(Number(e))&&typeof l().map(I)[0]=="number"&&(e=Number(e));const _=l().map(j()).includes(j()(e));if((w()===null||w()===1||l().length<w())&&(U()||!_)){if(!Z().includes(e)&&[!0,"append"].includes(C())&&N().length>0&&(typeof Z()[0]=="object"?e={label:N()}:(["number","undefined"].includes(typeof Z()[0])&&!isNaN(Number(N()))?e=Number(N()):e=N(),_e("create",{option:e})),C()==="append"&&Z([...Z(),e])),Ot()&&N(""),["",void 0,null].includes(e)){console.error(`MultiSelect: encountered falsy option ${e}`);return}w()===1?l([e]):(l([...l(),e]),x()===!0?l(l().sort((g,z)=>{const[X,u]=[I(g),I(z)];return`${X}`.localeCompare(`${u}`)})):typeof x()=="function"&&l(l().sort(x())));const we=l().length===w(),E=Be()===!0||Be()==="desktop"&&a(Ft)<p();we||E?Tt(s):E||(m=ve())==null||m.focus(),_e("add",{option:e}),_e("change",{option:e,type:"add"}),he(!1),(Y=G())==null||Y.setCustomValidity("")}}function vt(e){var m;if(l().length===0)return;const s=l().findIndex(Y=>j()(Y)===j()(e));let[_]=l().splice(s,1);if(_===void 0&&C()&&(_=typeof Z()[0]?{label:e}:e),_===void 0)return console.error(`Multiselect can't remove selected option ${JSON.stringify(e)}, not found in selected list`);l([...l()]),he(!1),(m=G())==null||m.setCustomValidity(""),_e("remove",{option:_}),_e("change",{option:_,type:"remove"})}function ht(e){var s;D()||(ce(!0),e instanceof FocusEvent||(s=ve())==null||s.focus(),_e("open",{event:e}))}function Tt(e){var s;ce(!1),(s=ve())==null||s.blur(),c(null),_e("close",{event:e})}async function cl(e){var s;if(e.key==="Escape"||e.key==="Tab")Tt(e),N("");else if(e.key==="Enter")e.preventDefault(),k()?(l().includes(k())?vt(k()):gt(k(),e),N("")):C()&&N().length>0?gt(N(),e):ht(e);else if(["ArrowDown","ArrowUp"].includes(e.key)){if(c()===null&&B().length>0){c(0);return}else if(C()&&!B().length&&N().length>0){V(ke,!a(ke));return}else if(c()===null)return;e.preventDefault();const _=e.key==="ArrowUp"?-1:1;if(c((c()+_)%B().length),c()<0&&c(B().length-1),P()){await Sl();const m=document.querySelector("ul.options > li.active");m&&((s=m.scrollIntoViewIfNeeded)==null||s.call(m))}}else e.key==="Backspace"&&l().length>0&&!N()?vt(l().at(-1)):B().length>0&&c(0)}function Pt(){_e("removeAll",{options:l()}),_e("change",{options:l(),type:"removeAll"}),l([]),N("")}const Rt=e=>s=>{["Enter","Space"].includes(s.code)&&(s.preventDefault(),e())};function Jt(e){De()&&!De().contains(e.target)&&Tt(e)}let Mt=He(null);const dl=e=>s=>{if(!s.dataTransfer)return;s.dataTransfer.dropEffect="move";const _=parseInt(s.dataTransfer.getData("text/plain")),m=[...l()];_<e?(m.splice(e+1,0,m[_]),m.splice(_,1)):(m.splice(e,0,m[_]),m.splice(_+1,1)),l(m),V(Mt,null)},ul=e=>s=>{s.dataTransfer&&(s.dataTransfer.effectAllowed="move",s.dataTransfer.dropEffect="move",s.dataTransfer.setData("text/plain",`${e}`))};let Nt=He();function fl(e){var E;if(!Ae()||typeof CSS>"u"||!CSS.highlights)return;CSS.highlights.clear();const s=(E=e==null?void 0:e.target)==null?void 0:E.value.trim().toLowerCase();if(!s)return;const _=document.createTreeWalker(a(Nt),NodeFilter.SHOW_TEXT,{acceptNode:g=>(g==null?void 0:g.textContent)===me()?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),m=[];let Y=_.nextNode();for(;Y;)m.push(Y),Y=_.nextNode();const we=m.map(g=>{var b;const z=(b=g.textContent)==null?void 0:b.toLowerCase(),X=[];let u=0;for(;z&&u<z.length;){const T=z.indexOf(s,u);if(T===-1)break;X.push(T),u=T+s.length}return X.map(T=>{const ie=new Range;return ie.setStart(g,T),ie.setEnd(g,T+s.length),ie})});CSS.highlights.set("sms-search-matches",new Highlight(...we.flat()))}Ne(()=>i(l()),()=>{Ct(l())}),Ne(()=>i(Ce()),()=>{mt(Ce())}),Ne(()=>(i(Z()),i(Q()),i(N()),i(l()),i(j()),i(U())),()=>{B(Z().filter(e=>Q()(e,N())&&(!l().map(j()).includes(j()(e))||U())))}),Ne(()=>(i(B()),i(c())),()=>{k(B()[c()??-1]??null)}),Ne(()=>(i(l()),I),()=>{V(r,e=>l().map(I).includes(e))}),Ne(()=>(i(R()),i(G())),()=>{var e;R(),(e=G())==null||e.setCustomValidity("")}),sl(),ol();var ye=sa();f("click",Kt,Jt),f("touchstart",Kt,Jt);let Vt;var Le=v(ye);at(Le),yt(Le,e=>G(e),()=>G());var Ht=y(Le,2);oe(Ht,t,"expand-icon",{get open(){return ce()}},e=>{Wl(e,{width:"15px",style:"min-width: 1em; padding: 0 1pt; cursor: pointer;"})});var $e=y(Ht,2),Wt=v($e);Dt(Wt,11,l,(e,s)=>U()?[j()(e),s]:j()(e),(e,s,_)=>{var m=Yl(),Y=Ue(()=>ul(a(_))),we=Ue(()=>dl(a(_)));let E;var g=v(m);oe(g,t,"selected",{get option(){return a(s)},get idx(){return a(_)}},u=>{var b=xe(),T=le(b);oe(T,t,"default",{get option(){return a(s)},get idx(){return a(_)}},ie=>{var re=xe(),A=le(re);{var de=ee=>{var te=xe(),qe=le(te);Qt(qe,()=>(i(I),a(s),M(()=>I(a(s))))),S(ee,te)},q=ee=>{var te=At();H(qe=>Ee(te,qe),[()=>(i(I),a(s),M(()=>I(a(s))))]),S(ee,te)};ae(A,ee=>{Pe()?ee(de):ee(q,!1)})}S(ie,re)}),S(u,b)});var z=y(g,2);{var X=u=>{var b=Kl(),T=Ue(()=>Rt(()=>vt(a(s)))),ie=v(b);oe(ie,t,"remove-icon",{},re=>{ll(re,{width:"15px"})}),h(b),H(re=>J(b,"title",`${dt()??""} ${re??""}`),[()=>(i(I),a(s),M(()=>I(a(s))))]),f("mouseup",b,Se(()=>vt(a(s)))),f("keydown",b,function(...re){var A;(A=a(T))==null||A.apply(this,re)}),S(u,b)};ae(z,u=>{i(D()),i(Re()),i(l()),M(()=>!D()&&(Re()===null||l().length>Re()))&&u(X)})}h(m),H(u=>{E=Me(m,1,el(nt()),"svelte-1dct8e3",E,{active:a(Mt)===a(_)}),J(m,"draggable",(i(L()),i(D()),i(l()),M(()=>L()&&!D()&&l().length>1))),Oe(m,`${u??""} ${Xe()??""}`)},[()=>(i(wt),a(s),M(()=>wt(a(s),"selected")))]),Il(m,()=>Ll,()=>({duration:100})),f("dragstart",m,function(...u){var b;(b=a(Y))==null||b.apply(this,u)}),f("drop",m,jt(function(...u){var b;(b=a(we))==null||b.apply(this,u)})),f("dragenter",m,()=>V(Mt,a(_))),f("dragover",m,jt(function(u){K.call(this,t,u)})),S(e,m)});var O=y(Wt,2);at(O),yt(O,e=>ve(e),()=>ve());var ml=y(O,2);oe(ml,t,"after-input",{get selected(){return l()},get disabled(){return D()},get invalid(){return he()},get id(){return ge()},get placeholder(){return je()},get open(){return ce()},get required(){return R()}},null),h($e);var Gt=y($e,2);{var gl=e=>{var s=xe(),_=le(s);oe(_,t,"spinner",{},m=>{Pl(m,{})}),S(e,s)};ae(Gt,e=>{Fe()&&e(gl)})}var Zt=y(Gt,2);{var vl=e=>{var s=xe(),_=le(s);oe(_,t,"disabled-icon",{},m=>{Xl(m,{width:"14pt",style:"margin: 0 2pt;","data-name":"disabled-icon"})}),S(e,s)},hl=e=>{var s=ea(),_=le(s);{var m=E=>{Vl(E,{angle:20,get wiggle(){return a(kt)},set wiggle(g){V(kt,g)},children:(g,z)=>{var X=Ql(),u=v(X,!0);h(X),H(b=>{Me(X,1,`max-select-msg ${Ye()??""}`,"svelte-1dct8e3"),Ee(u,b)},[()=>(i(Ke()),i(l()),i(w()),M(()=>{var b;return(b=Ke())==null?void 0:b(l().length,w())}))]),S(g,X)},$$slots:{default:!0},$$legacy:!0})};ae(_,E=>{w()&&(w()>1||Ke())&&E(m)})}var Y=y(_,2);{var we=E=>{var g=$l(),z=Ue(()=>Rt(Pt)),X=v(g);oe(X,t,"remove-icon",{},u=>{ll(u,{width:"15px"})}),h(g),H(()=>J(g,"title",ct())),f("mouseup",g,Se(Pt)),f("keydown",g,function(...u){var b;(b=a(z))==null||b.apply(this,u)}),S(E,g)};ae(Y,E=>{i(w()),i(l()),M(()=>w()!==1&&l().length>1)&&E(we)})}S(e,s)};ae(Zt,e=>{D()?e(vl):(i(l()),M(()=>l().length>0)&&e(hl,1))})}var pl=y(Zt,2);{var bl=e=>{var s=aa();let _;var m=v(s);Dt(m,1,()=>(i(B()),i(fe()),M(()=>B().slice(0,Math.max(0,fe()??0)||1/0))),nl,(E,g,z,X)=>{const u=Te(()=>{const{label:A,disabled:de=null,title:q=null,selectedTitle:ee=null,disabledTitle:te=se()}=a(g)instanceof Object?a(g):{label:a(g)};return{label:A,disabled:de,title:q,selectedTitle:ee,disabledTitle:te}}),b=Te(()=>c()===z);var T=ta();let ie;var re=v(T);oe(re,t,"option",{get option(){return a(g)},idx:z},A=>{var de=xe(),q=le(de);oe(q,t,"default",{get option(){return a(g)},idx:z},ee=>{var te=xe(),qe=le(te);{var Ie=Ve=>{var et=xe(),Et=le(et);Qt(Et,()=>(i(I),a(g),M(()=>I(a(g))))),S(Ve,et)},pt=Ve=>{var et=At();H(Et=>Ee(et,Et),[()=>(i(I),a(g),M(()=>I(a(g))))]),S(Ve,et)};ae(qe,Ve=>{Pe()?Ve(Ie):Ve(pt,!1)})}S(ee,te)}),S(A,de)}),h(T),H((A,de,q)=>{J(T,"title",A),ie=Me(T,1,`${Ze()??""} ${(a(b)?Ge():"")??""}`,"svelte-1dct8e3",ie,de),Oe(T,`${q??""} ${ze()??""}`)},[()=>(i(a(u).disabled),i(a(u).disabledTitle),a(r),i(a(u).label),i(a(u).selectedTitle),i(a(u).title),M(()=>a(u).disabled?a(u).disabledTitle:a(r)(a(u).label)&&a(u).selectedTitle||a(u).title)),()=>({selected:a(r)(a(u).label),active:a(b),disabled:a(u).disabled}),()=>(i(wt),a(g),M(()=>wt(a(g),"option")))]),f("mousedown",T,Se(function(A){K.call(this,t,A)})),f("mouseup",T,Se(A=>{a(u).disabled||gt(a(g),A)})),f("mouseover",T,()=>{a(u).disabled||c(z)}),f("focus",T,()=>{a(u).disabled||c(z)}),f("mouseout",T,()=>c(null)),f("blur",T,()=>c(null)),S(E,T)});var Y=y(m,2);{var we=E=>{const g=Te(()=>(i(l()),i(I),i(N()),M(()=>l().map(I).includes(N())))),z=Te(()=>!U()&&a(g)&&"dupe"),X=Te(()=>(i(C()),i(d()),M(()=>!!(C()&&d())&&"create"))),u=Te(()=>(i(B()),i(me()),M(()=>{var A;return!!(((A=B())==null?void 0:A.length)==0&&me())&&"no-match"}))),b=Te(()=>a(z)||a(X)||a(u));var T=xe(),ie=le(T);{var re=A=>{const de=Te(()=>(i(ue()),i(d()),i(me()),i(a(b)),M(()=>({dupe:ue(),create:d(),"no-match":me()})[a(b)])));var q=la();let ee,te;var qe=v(q);oe(qe,t,"user-msg",{get searchText(){return N()},get msgType(){return a(b)},get msg(){return a(de)}},Ie=>{var pt=At();H(()=>Ee(pt,a(de))),S(Ie,pt)}),h(q),H(()=>{J(q,"title",d()),ee=Me(q,1,`user-msg ${it()??""} ${(a(ke)?st():"")??""}`,"svelte-1dct8e3",ee,{active:a(ke)}),te=Oe(q,"",te,{cursor:(i(a(b)),M(()=>({dupe:"not-allowed",create:"pointer","no-match":"default"})[a(b)]))})}),f("mousedown",q,Se(function(Ie){K.call(this,t,Ie)})),f("mouseup",q,Se(Ie=>{C()&&gt(N(),Ie)})),f("mouseover",q,()=>V(ke,!0)),f("focus",q,()=>V(ke,!0)),f("mouseout",q,()=>V(ke,!1)),f("blur",q,()=>V(ke,!1)),S(A,q)};ae(ie,A=>{a(b)&&A(re)})}S(E,T)};ae(Y,E=>{N()&&E(we)})}h(s),yt(s,E=>V(Nt,E),()=>a(Nt)),H(()=>{_=Me(s,1,`options ${be()??""}`,"svelte-1dct8e3",_,{hidden:!ce()}),J(s,"aria-multiselectable",w()===null||w()>1),J(s,"aria-expanded",ce()),J(s,"aria-disabled",D()?"true":null),Oe(s,ft())}),S(e,s)};ae(pl,e=>{i(N()),i(me()),i(Z()),M(()=>{var s;return N()&&me()||((s=Z())==null?void 0:s.length)>0})&&e(bl)})}h(ye),yt(ye,e=>De(e),()=>De()),H(e=>{Vt=Me(ye,1,`multiselect ${Qe()??""}`,"svelte-1dct8e3",Vt,{disabled:D(),single:w()===1,open:ce(),invalid:he()}),J(ye,"title",D()?ne():null),J(ye,"data-id",ge()),Oe(ye,pe()),J(Le,"name",rt()),Le.required=R(),Cl(Le,e),Me($e,1,`selected ${Je()??""}`,"svelte-1dct8e3"),Oe($e,ut()),Me(O,1,el(xt()),"svelte-1dct8e3"),Oe(O,We()),J(O,"id",ge()),O.disabled=D(),J(O,"autocomplete",$()),J(O,"inputmode",St()),J(O,"pattern",ot()),J(O,"placeholder",(i(l()),i(je()),M(()=>l().length==0?je():null))),J(O,"aria-invalid",he()?"true":null)},[()=>(i(l()),i(R()),M(()=>l().length>=Number(R())?JSON.stringify(l()):null))]),Bl("innerWidth",e=>V(Ft,e)),f("invalid",Le,()=>{var s;he(!0);let e;w()&&w()>1&&Number(R())>1?e=`Please select between ${R()} and ${w()} options`:Number(R())>1?e=`Please select at least ${R()} options`:e="Please select an option",(s=G())==null||s.setCustomValidity(e)}),lt(O,N),f("mouseup",O,Tl(Se(ht))),f("keydown",O,Se(cl)),f("focus",O,function(e){K.call(this,t,e)}),f("focus",O,ht),f("input",O,fl),f("drop",O,()=>!1),f("blur",O,function(e){K.call(this,t,e)}),f("change",O,function(e){K.call(this,t,e)}),f("click",O,function(e){K.call(this,t,e)}),f("keydown",O,function(e){K.call(this,t,e)}),f("keyup",O,function(e){K.call(this,t,e)}),f("mousedown",O,function(e){K.call(this,t,e)}),f("mouseenter",O,function(e){K.call(this,t,e)}),f("mouseleave",O,function(e){K.call(this,t,e)}),f("touchcancel",O,function(e){K.call(this,t,e)}),f("touchend",O,function(e){K.call(this,t,e)}),f("touchmove",O,function(e){K.call(this,t,e)}),f("touchstart",O,function(e){K.call(this,t,e)}),f("mouseup",ye,Se(ht)),S(o,ye),It()}function ia(o=!0){const t=this,r=new IntersectionObserver(function([c]){const k=c.intersectionRatio;if(k<1){const d=k<=0&&o?"center":"nearest";t.scrollIntoView({block:d,inline:d})}this.disconnect()});return r.observe(t),r}var al;typeof Element<"u"&&!((al=Element.prototype)!=null&&al.scrollIntoViewIfNeeded)&&typeof IntersectionObserver<"u"&&(Element.prototype.scrollIntoViewIfNeeded=ia);var ra=W('<p class="p-2 text-cyan-500"><i class="fa-solid fa-circle-info text-2xl"></i> Make sure members can read and send messages in <span class="font-mono"> </span>.</p>'),oa=W('<p class="p-2 text-cyan-500"><i class="fa-solid fa-circle-info text-2xl"></i> Make sure members can read but not send messages in <span class="font-mono"> </span>.</p>'),ca=W(' <option class="p-1"> </option>',1),da=W("<option>Create a new channel</option><hr/><!>",1),ua=W('<i class="fa-solid fa-spinner animate-spin"></i>'),fa=W('<h1 class="m-4 text-center text-4xl font-bold">Create a panel</h1> <div class="m-2 mx-auto max-w-3xl sm:p-4"><!> <div class="rounded-xl bg-white p-4 shadow-sm dark:bg-slate-700"><div class="text-center"><!></div> <form class="my-4 text-lg"><div class="grid grid-cols-1 gap-4 md:grid-cols-2"><div><label><span class="font-medium">Type</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="How will members use the panel?"></i> <select class="input form-multiselect font-normal" required=""><option class="p-1">Buttons</option><option class="p-1">Select menu (dropdown)</option></select></label></div> <div><label class="font-medium"><span class="font-medium">Channel</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="The channel to send the panel message to"></i> <select required="" class="input form-multiselect font-normal"><!></select></label></div> <div><label class="font-medium"><span class="font-medium">Categories</span> <!> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="The category options to be available"></i> <!></label></div> <div><label><span class="font-medium">Title</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="The embed title"></i> <input type="text" class="input form-input" required=""/></label></div> <div><label><span class="font-medium">Large image</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Optional - the embed image"></i> <input type="url" class="input form-input"/></label></div> <div><label><span class="font-medium">Small image (thumbnail)</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Optional - the embed thumbnail"></i> <input type="url" class="input form-input"/></label></div> <div><label class="font-medium"><span class="font-medium">Description</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Optional - the embed description"></i> <textarea class="input form-input h-24" maxlength="4096"></textarea></label></div> <div class="place-self-center"><button type="submit" class="mt-4 rounded-lg bg-green-300 p-2 px-5 font-medium transition duration-300 hover:bg-green-500 hover:text-white disabled:cursor-not-allowed dark:bg-green-500/50 dark:hover:bg-green-500 dark:hover:text-white"><!> Create</button></div></div></form></div> <div class="mx-auto mt-8 max-w-lg text-center text-base"><div class="rounded-xl border-2 border-cyan-500 bg-cyan-500/20 p-2"><i class="fa-solid fa-circle-info text-2xl text-cyan-500"></i> <br/> Looking to edit or remove a panel? Just delete the message or channel in Discord.</div></div></div>',1);function Fa(o,t){qt(t,!0);const r=()=>il(Nl,"$page",c),[c,k]=rl();let d=t.data,C=bt(d.categories),F=_t(bt(d.channels));V(F,a(F).filter(l=>l.type===0),!0);let $=_t(null),P=_t(!1),p=bt({categories:[],channel:"new",description:"",image:"",title:"",type:"BUTTON",thumbnail:""}),se=_t(bt([]));const D=C.reduce((l,x)=>(l[(El.get(x.emoji)??"")+x.name]=x.id,l),{}),ne=l=>{var x;return(x=a(F).find(L=>L.id===l))==null?void 0:x.name},ue=async()=>{try{V(P,!0);const l={...p};l.channel==="new"&&(l.channel=null),l.categories=a(se).map(be=>D[be]);const x=`/api/admin/guilds/${r().params.guild}/panels`,L=await fetch(x,{method:"POST",body:JSON.stringify(l),credentials:"include",headers:{"Content-Type":"application/json; charset=UTF-8"}}),pe=await L.json();if(L.ok)window.location="./";else throw pe}catch(l){V(P,!1),V($,l,!0),window.scroll({top:0,behavior:"smooth"})}};Ml(()=>{p.type=p.categories.length>5?"MENU":p.categories.length>1&&p.type==="MESSAGE"?"BUTTON":p.type});var U=fa(),j=y(le(U),2),Q=v(j);{var Be=l=>{Dl(l,{get error(){return a($)}})};ae(Q,l=>{a($)&&l(Be)})}var G=y(Q,2),Ae=v(G),ge=v(Ae);{var ve=l=>{var x=ra(),L=y(v(x),2),pe=v(L);h(L),tt(),h(x),H(be=>Ee(pe,`#${be??""}`),[()=>ne(p.channel)]),S(l,x)},xt=l=>{var x=oa(),L=y(v(x),2),pe=v(L);h(L),tt(),h(x),H(be=>Ee(pe,`#${be??""}`),[()=>ne(p.channel)]),S(l,x)};ae(ge,l=>{p.channel!=="new"&&p.type==="MESSAGE"?l(ve):p.channel!=="new"&&p.type!=="MESSAGE"&&l(xt,1)})}h(Ae);var We=y(Ae,2),St=Ue(()=>jt(()=>ue())),he=v(We),Ge=v(he),st=v(Ge),Ze=y(v(st),4),ze=v(Ze);ze.value=ze.__value="BUTTON";var nt=y(ze);nt.value=nt.__value="MENU",h(Ze),h(st),h(Ge);var Xe=y(Ge,2),it=v(Xe),Fe=y(v(it),4);kl(Fe,()=>{var l=v(Fe),x=da(),L=le(x);L.value=L.__value="new";var pe=y(L,2);Dt(pe,17,()=>a(F),nl,(be,Je)=>{tt();var ut=ca(),ft=le(ut),Ce=y(ft),Ct=v(Ce,!0);h(Ce);var mt={};H(()=>{Ee(ft,`${a(Je).id??""} `),Ee(Ct,a(Je).name),mt!==(mt=a(Je).id)&&(Ce.value=(Ce.__value=a(Je).id)??"")}),S(be,ut)}),S(l,x)}),h(it),h(Xe);var B=y(Xe,2),fe=v(B),w=y(v(fe),2);Al(w);var Ke=y(w,4);{let l=Ue(()=>p.type==="MENU"?25:5),x=Ue(()=>Object.keys(D));na(Ke,{outerDivClass:"text-base my-1 p-2 rounded-md border-transparent bg-gray-100 dark:bg-slate-800 font-normal shadow-sm transition-colors has-[:focus]:ring-2 has-[:focus]:ring-blurple",inputClass:"p-0 rounded-md bg-transparent transition-colors border-0 focus:ring-0",ulSelectedClass:"bg-gray-100 dark:bg-slate-800 text-gray-800 dark:text-slate-300",liSelectedClass:"bg-blurple text-white text-sm font-semibold font-mono",ulOptionsClass:"bg-white dark:bg-slate-900 p-2 max-h-48 overflow-y-auto",liOptionClass:"rounded-md",liActiveOptionClass:"bg-blurple text-white",liUserMsgClass:"text-red-700 dark:text-red-500 bg-red-400/40 dark:bg-red-500/20",liActiveUserMsgClass:"",maxSelectMsgClass:"text-xs",noMatchingOptionsMsg:"Create a category in the categories section",required:!0,get maxSelect(){return a(l)},get options(){return a(x)},get selected(){return a(se)},set selected(L){V(se,L,!0)}})}h(fe),h(B);var Ye=y(B,2),rt=v(Ye),me=y(v(rt),4);at(me),h(rt),h(Ye);var ce=y(Ye,2),Z=v(ce),De=y(v(Z),4);at(De),h(Z),h(ce);var Qe=y(ce,2),Pe=v(Qe),ot=y(v(Pe),4);at(ot),h(Pe),h(Qe);var je=y(Qe,2),ct=v(je),dt=y(v(ct),4);Ol(dt),h(ct),h(je);var Re=y(je,2),R=v(Re),Ot=v(R);{var N=l=>{var x=ua();S(l,x)};ae(Ot,l=>{a(P)&&l(N)})}tt(),h(R),h(Re),h(he),h(We),h(G),tt(2),h(j),H(()=>{ze.disabled=p.categories.length>5,R.disabled=a(P)}),f("submit",We,function(...l){var x;(x=a(St))==null||x.apply(this,l)}),Yt(Ze,()=>p.type,l=>p.type=l),Yt(Fe,()=>p.channel,l=>p.channel=l),lt(me,()=>p.title,l=>p.title=l),lt(De,()=>p.image,l=>p.image=l),lt(ot,()=>p.thumbnail,l=>p.thumbnail=l),lt(dt,()=>p.description,l=>p.description=l),S(o,U),It(),k()}export{Fa as component,za as universal};
