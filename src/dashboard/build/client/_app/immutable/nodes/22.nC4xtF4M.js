import{e as pl}from"../chunks/PD1Wq3xD.js";import"../chunks/Bg9kRutz.js";import{a7 as hl,t as I,p as At,aY as Ne,N as q,aZ as el,c as p,r as h,a as Dt,a_ as Ht,d as y,X as Q,s as J,a$ as Je,g as a,f as te,h as Le,aU as bl,b as ht,e as tt}from"../chunks/D0Xv9YzD.js";import{s as Ee}from"../chunks/DH41_4OW.js";import{i as $}from"../chunks/C1nl-272.js";import{e as Tt,i as tl}from"../chunks/BU36I_Bd.js";import{t as K,a as w,n as jt,c as me,e as Mt}from"../chunks/BCej-IkM.js";import{s as D,b as qt,c as _l,r as at}from"../chunks/CEchPJ_u.js";import{m as yl,w as wl,j as f,k as xl}from"../chunks/B4B08OCC.js";import{b as lt}from"../chunks/DzI3iajh.js";import{b as Wt}from"../chunks/BdT_oPZe.js";import{s as Sl,a as xe,p as Nt}from"../chunks/r2wwZTEc.js";import{p as s,l as It,a as Ie}from"../chunks/y_msc5TT.js";import{a as ll,s as al}from"../chunks/DiUvGWfG.js";import{r as Ol}from"../chunks/DEn2hETk.js";import{p as Cl}from"../chunks/DyFsth0o.js";import"../chunks/69_IOA4Y.js";import{e as kl}from"../chunks/DSwvs_u7.js";import{R as Ml,E as Tl}from"../chunks/DniPBx13.js";import{h as Zt}from"../chunks/13u9z0kj.js";import{s as ue,f as Nl}from"../chunks/DIt2gZ8Z.js";import{s as Te,t as ve}from"../chunks/DzrszLNB.js";import{r as Gt,l as El,a as Al}from"../chunks/BabSYDxt.js";import{b as bt}from"../chunks/C6RyfrLQ.js";import{i as sl}from"../chunks/C5KiJ9nI.js";import{c as Dl}from"../chunks/DQMzYwo6.js";import{c as Xt}from"../chunks/Jce5emvo.js";import{w as jl}from"../chunks/BTVoBDnD.js";function st(n,e,i,r){var u=n.__styles??(n.__styles={});u[e]!==i&&(u[e]=i,i==null?n.style.removeProperty(e):n.style.setProperty(e,i,""))}function ql(n,e){yl(window,["resize"],()=>wl(()=>e(window[n])))}function Y(n,e){var d;var i=(d=n.$$events)==null?void 0:d[e.type],r=hl(i)?i.slice():i==null?[]:[i];for(var u of r)u.call(this,e)}async function Il({fetch:n,params:e}){var M;const i={credentials:"include"},r=await n(`/api/admin/guilds/${e.guild}/categories`,i),u=(M=r.headers.get("Content-Type"))==null?void 0:M.includes("json"),d=u?await r.json():await r.text();if(!r.ok)pl(r.status,u?JSON.stringify(d):d);else return{categories:d,channels:await(await n(`/api/admin/guilds/${e.guild}/data?query=channels.cache`,i)).json()}}const La=Object.freeze(Object.defineProperty({__proto__:null,load:Il},Symbol.toStringTag,{value:"Module"}));var Ll=K('<div class="svelte-154g05d"></div>');function Ul(n,e){let i=s(e,"color",24,()=>"cornflowerblue"),r=s(e,"duration",24,()=>"1.5s"),u=s(e,"size",24,()=>"1em");var d=Ll();I(()=>{D(d,"style",`--duration: ${r()??""}`),st(d,"border-color",`${i()??""} transparent ${i()??""}
  ${i()??""}`),st(d,"width",u()),st(d,"height",u())}),w(n,d)}function Yt(n){return Object.prototype.toString.call(n)==="[object Date]"}function Et(n,e,i,r){if(typeof i=="number"||Yt(i)){const u=r-i,d=(i-e)/(n.dt||1/60),M=n.opts.stiffness*u,P=n.opts.damping*d,le=(M-P)*n.inv_mass,z=(d+le)*n.dt;return Math.abs(z)<n.opts.precision&&Math.abs(u)<n.opts.precision?r:(n.settled=!1,Yt(i)?new Date(i.getTime()+z):i+z)}else{if(Array.isArray(i))return i.map((u,d)=>Et(n,e[d],i[d],r[d]));if(typeof i=="object"){const u={};for(const d in i)u[d]=Et(n,e[d],i[d],r[d]);return u}else throw new Error(`Cannot spring ${typeof i} values`)}}function Bl(n,e={}){const i=jl(n),{stiffness:r=.15,damping:u=.8,precision:d=.01}=e;let M,P,le,z=n,b=n,re=1,U=0,oe=!1;function pe(L,ce={}){b=L;const Ue=le={};return n==null||ce.hard||B.stiffness>=1&&B.damping>=1?(oe=!0,M=Gt.now(),z=L,i.set(n=b),Promise.resolve()):(ce.soft&&(U=1/((ce.soft===!0?.5:+ce.soft)*60),re=0),P||(M=Gt.now(),oe=!1,P=El(V=>{if(oe)return oe=!1,P=null,!1;re=Math.min(re+U,1);const Ae=Math.min(V-M,1e3/30),he={inv_mass:re,opts:B,settled:!0,dt:Ae*60/1e3},be=Et(he,z,n,b);return M=V,z=n,i.set(n=be),he.settled&&(P=null),!he.settled})),new Promise(V=>{P.promise.then(()=>{Ue===le&&V()})}))}const B={set:pe,update:(L,ce)=>pe(L(b,n),ce),subscribe:i.subscribe,stiffness:r,damping:u,precision:d};return B}var Pl=K("<span><!></span>");function zl(n,e){At(e,!1);const[i,r]=al(),u=()=>ll(pe,"$store",i);let d=s(e,"wiggle",12,!1),M=s(e,"angle",8,0),P=s(e,"scale",8,1),le=s(e,"dx",8,0),z=s(e,"dy",8,0),b=s(e,"duration",8,200),re=s(e,"stiffness",8,.05),U=s(e,"damping",8,.1),oe={angle:0,scale:1,dx:0,dy:0},pe=Bl(oe,{stiffness:re(),damping:U()});Ne(()=>(q(d()),q(b())),()=>{d()&&setTimeout(()=>d(!1),b())}),Ne(()=>(q(d()),q(P()),q(M()),q(le()),q(z())),()=>{pe.set(d()?{scale:P(),angle:M(),dx:le(),dy:z()}:oe)}),el(),sl();var B=Pl(),L=p(B);ue(L,e,"default",{},null),h(B),I(()=>st(B,"transform",`rotate(${u().angle??""}deg) scale(${u().scale??""}) translate(${u().dx??""}px,
  ${u().dy??""}px)`)),w(n,B),Dt(),r()}var Fl=jt('<svg><path d="M3.646 9.146a.5.5 0 0 1 .708 0L8 12.793l3.646-3.647a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 0-.708zm0-2.292a.5.5 0 0 0 .708 0L8 3.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708z"></path></svg>');function Rl(n,e){const i=It(e,["children","$$slots","$$events","$$legacy"]);var r=Fl();let u;I(()=>u=qt(r,u,{...i,fill:"currentColor",viewBox:"0 0 16 16"},void 0,!0)),w(n,r)}var Jl=jt('<svg><path d="M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"></path></svg>');function Kt(n,e){const i=It(e,["children","$$slots","$$events","$$legacy"]);var r=Jl();let u;I(()=>u=qt(r,u,{...i,viewBox:"0 0 24 24",fill:"currentColor"},void 0,!0)),w(n,r)}var Vl=jt('<svg><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2S2 6.477 2 12s4.477 10 10 10Zm-4.906-3.68L18.32 7.094A8 8 0 0 1 7.094 18.32ZM5.68 16.906A8 8 0 0 1 16.906 5.68L5.68 16.906Z"></path></svg>');function Hl(n,e){const i=It(e,["children","$$slots","$$events","$$legacy"]);var r=Vl();let u;I(()=>u=qt(r,u,{...i,viewBox:"0 0 24 24",fill:"currentColor"},void 0,!0)),w(n,r)}const ie=n=>n instanceof Object?(n.label===void 0&&console.error(`MultiSelect option ${JSON.stringify(n)} is an object but has no label key`),n.label):`${n}`;function Qt(n,e=null){let i="";if(["selected","option",null].includes(e)||console.error(`MultiSelect: Invalid key=${e} for get_style`),typeof n=="object"&&n.style&&(typeof n.style=="string"&&(i=n.style),typeof n.style=="object")){if(e&&e in n.style)return n.style[e]??"";console.error(`Invalid style object for option=${JSON.stringify(n)}`)}return i.trim()&&!i.trim().endsWith(";")&&(i+=";"),i}var Wl=K('<button type="button" class="remove svelte-1ndgm4m"><!></button>'),Zl=K('<li role="option" aria-selected="true"><!> <!></li>'),Gl=K("<span> </span>"),Xl=K('<button type="button" class="remove remove-all svelte-1ndgm4m"><!></button>'),Yl=K("<!> <!>",1),Kl=K('<li role="option" aria-selected="false"><!></li>'),Ql=K('<li role="option" aria-selected="false"><!></li>'),$l=K('<ul role="listbox"><!> <!></ul>'),ea=K('<div role="searchbox" tabindex="-1"><input tabindex="-1" aria-hidden="true" aria-label="ignore this, used only to prevent form submission if select is required but empty" class="form-control svelte-1ndgm4m"> <!> <ul aria-label="selected options"><!> <input> <!></ul> <!> <!> <!></div>');function ta(n,e){var Vt;At(e,!1);const i=Je();let r=s(e,"activeIndex",12,null),u=s(e,"activeOption",12,null),d=s(e,"createOptionMsg",24,()=>"Create this option..."),M=s(e,"allowUserOptions",8,!1),P=s(e,"allowEmpty",8,!1),le=s(e,"autocomplete",24,()=>"off"),z=s(e,"autoScroll",8,!0),b=s(e,"breakpoint",8,800),re=s(e,"defaultDisabledTitle",24,()=>"This option is disabled"),U=s(e,"disabled",8,!1),oe=s(e,"disabledInputTitle",24,()=>"This input is disabled"),pe=s(e,"duplicateOptionMsg",24,()=>"This option is already selected"),B=s(e,"duplicates",8,!1),L=s(e,"key",8,t=>`${ie(t)}`.toLowerCase()),ce=s(e,"filterFunc",8,(t,l)=>l?`${ie(t)}`.toLowerCase().includes(l.toLowerCase()):!0),Ue=s(e,"closeDropdownOnSelect",24,()=>"desktop"),V=s(e,"form_input",12,null),Ae=s(e,"highlightMatches",8,!0),he=s(e,"id",8,null),be=s(e,"input",12,null),_t=s(e,"inputClass",24,()=>""),Ve=s(e,"inputStyle",8,null),yt=s(e,"inputmode",8,null),_e=s(e,"invalid",12,!1),He=s(e,"liActiveOptionClass",24,()=>""),nt=s(e,"liActiveUserMsgClass",24,()=>""),We=s(e,"liOptionClass",24,()=>""),Be=s(e,"liOptionStyle",8,null),it=s(e,"liSelectedClass",24,()=>""),Ze=s(e,"liSelectedStyle",8,null),rt=s(e,"liUserMsgClass",24,()=>""),Pe=s(e,"loading",8,!1),H=s(e,"matchingOptions",28,()=>[]),Se=s(e,"maxOptions",8,void 0),x=s(e,"maxSelect",8,null),Ge=s(e,"maxSelectMsg",8,(t,l)=>l>1?`${t}/${l}`:""),ot=s(e,"maxSelectMsgClass",24,()=>""),wt=s(e,"name",8,null),ze=s(e,"noMatchingOptionsMsg",24,()=>"No matching options"),ye=s(e,"open",12,!1),W=s(e,"options",12),De=s(e,"outerDiv",12,null),ct=s(e,"outerDivClass",24,()=>""),je=s(e,"parseLabelsAsHtml",8,!1),dt=s(e,"pattern",8,null),Xe=s(e,"placeholder",8,null),Ye=s(e,"removeAllTitle",24,()=>"Remove all"),ut=s(e,"removeBtnTitle",24,()=>"Remove"),Ke=s(e,"minSelect",8,null),Z=s(e,"required",8,!1),ft=s(e,"resetFilterOnAdd",8,!0),N=s(e,"searchText",28,()=>""),o=s(e,"selected",28,()=>{var t;return((t=W())==null?void 0:t.filter(l=>l instanceof Object&&(l==null?void 0:l.preselected)).slice(0,x()??void 0))??[]}),we=s(e,"sortSelected",8,!1),mt=s(e,"selectedOptionsDraggable",24,()=>!we()),xt=s(e,"style",8,null),c=s(e,"ulOptionsClass",24,()=>""),k=s(e,"ulSelectedClass",24,()=>""),ee=s(e,"ulSelectedStyle",8,null),ge=s(e,"ulOptionsStyle",8,null),G=s(e,"value",12,null);const Oe=t=>{G(x()===1?t[0]??null:t)},Fe=t=>{x()===1?o(t?[t]:[]):o(t??[])};let Qe=Je(!1);((Vt=W())==null?void 0:Vt.length)>0||(M()||Pe()||U()||P()?W([]):console.error("MultiSelect received no options")),x()!==null&&x()<1&&console.error(`MultiSelect's maxSelect must be null or positive integer, got ${x()}`),Array.isArray(o())||console.error(`MultiSelect's selected prop should always be an array, got ${o()}`),x()&&typeof Z()=="number"&&Z()>x()&&console.error(`MultiSelect maxSelect=${x()} < required=${Z()}, makes it impossible for users to submit a valid form`),je()&&M()&&console.warn("Don't combine parseLabelsAsHtml and allowUserOptions. It's susceptible to XSS attacks!"),we()&&mt()&&console.warn("MultiSelect's sortSelected and selectedOptionsDraggable should not be combined as any user re-orderings of selected options will be undone by sortSelected on component re-renders."),M()&&!d()&&d()!==null&&console.error(`MultiSelect has allowUserOptions=${M()} but createOptionMsg=${d()} is falsy. This prevents the "Add option" <span> from showing up, resulting in a confusing user experience.`),Se()&&(typeof Se()!="number"||Se()<0||Se()%1!=0)&&console.error(`MultiSelect's maxOptions must be undefined or a positive integer, got ${Se()}`);const fe=Dl();let Ce=Je(!1),Lt=Je();if(r()!==null&&!H()[r()])throw`Run time error, activeIndex=${r()} is out of bounds, matchingOptions.length=${H().length}`;function gt(t,l){var m,F;x()&&x()>1&&o().length>=x()&&J(Qe,!0),!isNaN(Number(t))&&typeof o().map(ie)[0]=="number"&&(t=Number(t));const _=o().map(L()).includes(L()(t));if((x()===null||x()===1||o().length<x())&&(B()||!_)){if(!W().includes(t)&&[!0,"append"].includes(M())&&N().length>0&&(typeof W()[0]=="object"?t={label:N()}:(["number","undefined"].includes(typeof W()[0])&&!isNaN(Number(N()))?t=Number(N()):t=N(),fe("create",{option:t})),M()==="append"&&W([...W(),t])),ft()&&N(""),["",void 0,null].includes(t)){console.error(`MultiSelect: encountered falsy option ${t}`);return}x()===1?o([t]):(o([...o(),t]),we()===!0?o(o().sort((j,de)=>{const[v,g]=[ie(j),ie(de)];return`${v}`.localeCompare(`${g}`)})):typeof we()=="function"&&o(o().sort(we())));const X=o().length===x(),E=Ue()===!0||Ue()==="desktop"&&a(Lt)<b();X||E?St(l):E||(m=be())==null||m.focus(),fe("add",{option:t}),fe("change",{option:t,type:"add"}),_e(!1),(F=V())==null||F.setCustomValidity("")}}function vt(t){var m;if(o().length===0)return;const l=o().findIndex(F=>L()(F)===L()(t));let[_]=o().splice(l,1);if(_===void 0&&M()&&(_=typeof W()[0]?{label:t}:t),_===void 0)return console.error(`Multiselect can't remove selected option ${JSON.stringify(t)}, not found in selected list`);o([...o()]),_e(!1),(m=V())==null||m.setCustomValidity(""),fe("remove",{option:_}),fe("change",{option:_,type:"remove"})}function pt(t){var l;U()||(ye(!0),t instanceof FocusEvent||(l=be())==null||l.focus(),fe("open",{event:t}))}function St(t){var l;ye(!1),(l=be())==null||l.blur(),r(null),fe("close",{event:t})}async function nl(t){var l;if(t.key==="Escape"||t.key==="Tab")St(t),N("");else if(t.key==="Enter")t.preventDefault(),u()?(o().includes(u())?vt(u()):gt(u(),t),N("")):M()&&N().length>0?gt(N(),t):pt(t);else if(["ArrowDown","ArrowUp"].includes(t.key)){if(r()===null&&H().length>0){r(0);return}else if(M()&&!H().length&&N().length>0){J(Ce,!a(Ce));return}else if(r()===null)return;t.preventDefault();const _=t.key==="ArrowUp"?-1:1;if(r((r()+_)%H().length),r()<0&&r(H().length-1),z()){await bl();const m=document.querySelector("ul.options > li.active");m&&((l=m.scrollIntoViewIfNeeded)==null||l.call(m))}}else t.key==="Backspace"&&o().length>0&&!N()?vt(o().at(-1)):H().length>0&&r(0)}function Ut(){fe("removeAll",{options:o()}),fe("change",{options:o(),type:"removeAll"}),o([]),N("")}const Bt=t=>l=>{["Enter","Space"].includes(l.code)&&(l.preventDefault(),t())};function Pt(t){De()&&!De().contains(t.target)&&St(t)}let Ot=Je(null);const il=t=>l=>{if(!l.dataTransfer)return;l.dataTransfer.dropEffect="move";const _=parseInt(l.dataTransfer.getData("text/plain")),m=[...o()];_<t?(m.splice(t+1,0,m[_]),m.splice(_,1)):(m.splice(t,0,m[_]),m.splice(_+1,1)),o(m),J(Ot,null)},rl=t=>l=>{l.dataTransfer&&(l.dataTransfer.effectAllowed="move",l.dataTransfer.dropEffect="move",l.dataTransfer.setData("text/plain",`${t}`))};let Ct=Je();function ol(t){var E;if(!Ae()||typeof CSS>"u"||!CSS.highlights)return;CSS.highlights.clear();const l=(E=t==null?void 0:t.target)==null?void 0:E.value.trim().toLowerCase();if(!l)return;const _=document.createTreeWalker(a(Ct),NodeFilter.SHOW_TEXT,{acceptNode:j=>(j==null?void 0:j.textContent)===ze()?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),m=[];let F=_.nextNode();for(;F;)m.push(F),F=_.nextNode();const X=m.map(j=>{var T;const de=(T=j.textContent)==null?void 0:T.toLowerCase(),v=[];let g=0;for(;de&&g<de.length;){const R=de.indexOf(l,g);if(R===-1)break;v.push(R),g=R+l.length}return v.map(R=>{const O=new Range;return O.setStart(j,R),O.setEnd(j,R+l.length),O})});CSS.highlights.set("sms-search-matches",new Highlight(...X.flat()))}Ne(()=>q(o()),()=>{Oe(o())}),Ne(()=>q(G()),()=>{Fe(G())}),Ne(()=>(q(W()),q(ce()),q(N()),q(o()),q(L()),q(B())),()=>{H(W().filter(t=>ce()(t,N())&&(!o().map(L()).includes(L()(t))||B())))}),Ne(()=>(q(H()),q(r())),()=>{u(H()[r()??-1]??null)}),Ne(()=>(q(o()),ie),()=>{J(i,t=>o().map(ie).includes(t))}),Ne(()=>(q(Z()),q(V())),()=>{var t;Z(),(t=V())==null||t.setCustomValidity("")}),el(),sl();var ae=ea();f("click",Ht,Pt),f("touchstart",Ht,Pt);var qe=p(ae);at(qe),bt(qe,t=>V(t),()=>V());var zt=y(qe,2);ue(zt,e,"expand-icon",{get open(){return ye()}},t=>{Rl(t,{width:"15px",style:"min-width: 1em; padding: 0 1pt; cursor: pointer;"})});var $e=y(zt,2),Ft=p($e);Tt(Ft,11,o,(t,l)=>B()?[L()(t),l]:L()(t),(t,l,_)=>{var m=Zl(),F=Le(()=>rl(a(_))),X=Le(()=>il(a(_))),E=p(m);ue(E,e,"selected",{get option(){return a(l)},get idx(){return a(_)}},v=>{var g=me(),T=te(g);ue(T,e,"default",{get option(){return a(l)},get idx(){return a(_)}},R=>{var O=me(),A=te(O);{var C=se=>{var ne=me(),Me=te(ne);Zt(Me,()=>ie(a(l))),w(se,ne)},ke=se=>{var ne=Mt();I(Me=>Ee(ne,Me),[()=>ie(a(l))],Q),w(se,ne)};$(A,se=>{je()?se(C):se(ke,!1)})}w(R,O)}),w(v,g)});var j=y(E,2);{var de=v=>{var g=Wl(),T=Le(()=>Bt(()=>vt(a(l)))),R=p(g);ue(R,e,"remove-icon",{},O=>{Kt(O,{width:"15px"})}),h(g),I(O=>D(g,"title",`${ut()??""} ${O??""}`),[()=>ie(a(l))],Q),f("mouseup",g,xe(()=>vt(a(l)))),f("keydown",g,function(...O){var A;(A=a(T))==null||A.apply(this,O)}),w(v,g)};$(j,v=>{!U()&&(Ke()===null||o().length>Ke())&&v(de)})}h(m),I(v=>{Te(m,Xt(it()),"svelte-1ndgm4m"),D(m,"draggable",mt()&&!U()&&o().length>1),D(m,"style",`${v??""} ${Ze()??""}`),ve(m,"active",a(Ot)===a(_))},[()=>Qt(a(l),"selected")],Q),Al(m,()=>Nl,()=>({duration:100})),f("dragstart",m,function(...v){var g;(g=a(F))==null||g.apply(this,v)}),f("drop",m,Nt(function(...v){var g;(g=a(X))==null||g.apply(this,v)})),f("dragenter",m,()=>J(Ot,a(_))),f("dragover",m,Nt(function(v){Y.call(this,e,v)})),w(t,m)});var S=y(Ft,2);at(S),bt(S,t=>be(t),()=>be());var cl=y(S,2);ue(cl,e,"after-input",{get selected(){return o()},get disabled(){return U()},get invalid(){return _e()},get id(){return he()},get placeholder(){return Xe()},get open(){return ye()},get required(){return Z()}},null),h($e);var Rt=y($e,2);{var dl=t=>{var l=me(),_=te(l);ue(_,e,"spinner",{},m=>{Ul(m,{})}),w(t,l)};$(Rt,t=>{Pe()&&t(dl)})}var Jt=y(Rt,2);{var ul=t=>{var l=me(),_=te(l);ue(_,e,"disabled-icon",{},m=>{Hl(m,{width:"14pt",style:"margin: 0 2pt;","data-name":"disabled-icon"})}),w(t,l)},fl=t=>{var l=me(),_=te(l);{var m=F=>{var X=Yl(),E=te(X);{var j=g=>{zl(g,{angle:20,get wiggle(){return a(Qe)},set wiggle(T){J(Qe,T)},children:(T,R)=>{var O=Gl(),A=p(O,!0);h(O),I(C=>{Te(O,`max-select-msg ${ot()??""} svelte-1ndgm4m`),Ee(A,C)},[()=>{var C;return(C=Ge())==null?void 0:C(o().length,x())}],Q),w(T,O)},$$slots:{default:!0},$$legacy:!0})};$(E,g=>{x()&&(x()>1||Ge())&&g(j)})}var de=y(E,2);{var v=g=>{var T=Xl(),R=Le(()=>Bt(Ut)),O=p(T);ue(O,e,"remove-icon",{},A=>{Kt(A,{width:"15px"})}),h(T),I(()=>D(T,"title",Ye())),f("mouseup",T,xe(Ut)),f("keydown",T,function(...A){var C;(C=a(R))==null||C.apply(this,A)}),w(g,T)};$(de,g=>{x()!==1&&o().length>1&&g(v)})}w(F,X)};$(_,F=>{o().length>0&&F(m)},!0)}w(t,l)};$(Jt,t=>{U()?t(ul):t(fl,!1)})}var ml=y(Jt,2);{var gl=t=>{var l=$l(),_=p(l);Tt(_,1,()=>H().slice(0,Math.max(0,Se()??0)||1/0),tl,(X,E,j,de)=>{var v=Kl();const g=Q(()=>{const{label:O,disabled:A=null,title:C=null,selectedTitle:ke=null,disabledTitle:se=re()}=a(E)instanceof Object?a(E):{label:a(E)};return{label:O,disabled:A,title:C,selectedTitle:ke,disabledTitle:se}}),T=Q(()=>r()===j);var R=p(v);ue(R,e,"option",{get option(){return a(E)},idx:j},O=>{var A=me(),C=te(A);ue(C,e,"default",{get option(){return a(E)},idx:j},ke=>{var se=me(),ne=te(se);{var Me=Re=>{var et=me(),kt=te(et);Zt(kt,()=>ie(a(E))),w(Re,et)},vl=Re=>{var et=Mt();I(kt=>Ee(et,kt),[()=>ie(a(E))],Q),w(Re,et)};$(ne,Re=>{je()?Re(Me):Re(vl,!1)})}w(ke,se)}),w(O,A)}),h(v),I((O,A,C)=>{D(v,"title",O),Te(v,`${We()??""} ${(a(T)?He():"")??""} svelte-1ndgm4m`),D(v,"style",`${A??""} ${Be()??""}`),ve(v,"selected",C),ve(v,"active",a(T)),ve(v,"disabled",a(g).disabled)},[()=>a(g).disabled?a(g).disabledTitle:a(i)(a(g).label)&&a(g).selectedTitle||a(g).title,()=>Qt(a(E),"option"),()=>a(i)(a(g).label)],Q),f("mousedown",v,xe(function(O){Y.call(this,e,O)})),f("mouseup",v,xe(O=>{a(g).disabled||gt(a(E),O)})),f("mouseover",v,()=>{a(g).disabled||r(j)}),f("focus",v,()=>{a(g).disabled||r(j)}),f("mouseout",v,()=>r(null)),f("blur",v,()=>r(null)),w(X,v)});var m=y(_,2);{var F=X=>{var E=me();const j=Q(()=>o().map(ie).includes(N())),de=Q(()=>!B()&&a(j)&&"dupe"),v=Q(()=>!!(M()&&d())&&"create"),g=Q(()=>{var A;return!!(((A=H())==null?void 0:A.length)==0&&ze())&&"no-match"}),T=Q(()=>a(de)||a(v)||a(g));var R=te(E);{var O=A=>{var C=Ql();const ke=Q(()=>({dupe:pe(),create:d(),"no-match":ze()})[a(T)]);var se=p(C);ue(se,e,"user-msg",{get searchText(){return N()},get msgType(){return a(T)},get msg(){return a(ke)}},ne=>{var Me=Mt();I(()=>Ee(Me,a(ke))),w(ne,Me)}),h(C),I(()=>{D(C,"title",d()),Te(C,`user-msg ${rt()??""} ${(a(Ce)?nt():"")??""} svelte-1ndgm4m`),ve(C,"active",a(Ce)),st(C,"cursor",{dupe:"not-allowed",create:"pointer","no-match":"default"}[a(T)])}),f("mousedown",C,xe(function(ne){Y.call(this,e,ne)})),f("mouseup",C,xe(ne=>{M()&&gt(N(),ne)})),f("mouseover",C,()=>J(Ce,!0)),f("focus",C,()=>J(Ce,!0)),f("mouseout",C,()=>J(Ce,!1)),f("blur",C,()=>J(Ce,!1)),w(A,C)};$(R,A=>{a(T)&&A(O)})}w(X,E)};$(m,X=>{N()&&X(F)})}h(l),bt(l,X=>J(Ct,X),()=>a(Ct)),I(()=>{Te(l,`options ${c()??""} svelte-1ndgm4m`),D(l,"aria-multiselectable",x()===null||x()>1),D(l,"aria-expanded",ye()),D(l,"aria-disabled",U()?"true":null),D(l,"style",ge()),ve(l,"hidden",!ye())}),w(t,l)};$(ml,t=>{var l;(N()&&ze()||((l=W())==null?void 0:l.length)>0)&&t(gl)})}h(ae),bt(ae,t=>De(t),()=>De()),I(t=>{Te(ae,`multiselect ${ct()??""} svelte-1ndgm4m`),D(ae,"title",U()?oe():null),D(ae,"data-id",he()),D(ae,"style",xt()),ve(ae,"disabled",U()),ve(ae,"single",x()===1),ve(ae,"open",ye()),ve(ae,"invalid",_e()),D(qe,"name",wt()),qe.required=Z(),_l(qe,t),Te($e,`selected ${k()??""} svelte-1ndgm4m`),D($e,"style",ee()),Te(S,Xt(_t()),"svelte-1ndgm4m"),D(S,"style",Ve()),D(S,"id",he()),S.disabled=U(),D(S,"autocomplete",le()),D(S,"inputmode",yt()),D(S,"pattern",dt()),D(S,"placeholder",o().length==0?Xe():null),D(S,"aria-invalid",_e()?"true":null)},[()=>o().length>=Number(Z())?JSON.stringify(o()):null],Q),ql("innerWidth",t=>J(Lt,t)),f("invalid",qe,()=>{var l;_e(!0);let t;x()&&x()>1&&Number(Z())>1?t=`Please select between ${Z()} and ${x()} options`:Number(Z())>1?t=`Please select at least ${Z()} options`:t="Please select an option",(l=V())==null||l.setCustomValidity(t)}),lt(S,N),f("mouseup",S,Sl(xe(pt))),f("keydown",S,xe(nl)),f("focus",S,function(t){Y.call(this,e,t)}),f("focus",S,pt),f("input",S,ol),f("drop",S,()=>!1),f("blur",S,function(t){Y.call(this,e,t)}),f("change",S,function(t){Y.call(this,e,t)}),f("click",S,function(t){Y.call(this,e,t)}),f("keydown",S,function(t){Y.call(this,e,t)}),f("keyup",S,function(t){Y.call(this,e,t)}),f("mousedown",S,function(t){Y.call(this,e,t)}),f("mouseenter",S,function(t){Y.call(this,e,t)}),f("mouseleave",S,function(t){Y.call(this,e,t)}),f("touchcancel",S,function(t){Y.call(this,e,t)}),f("touchend",S,function(t){Y.call(this,e,t)}),f("touchmove",S,function(t){Y.call(this,e,t)}),f("touchstart",S,function(t){Y.call(this,e,t)}),f("mouseup",ae,xe(pt)),w(n,ae),Dt()}function la(n=!0){const e=this,i=new IntersectionObserver(function([r]){const u=r.intersectionRatio;if(u<1){const d=u<=0&&n?"center":"nearest";e.scrollIntoView({block:d,inline:d})}this.disconnect()});return i.observe(e),i}var $t;typeof Element<"u"&&!(($t=Element.prototype)!=null&&$t.scrollIntoViewIfNeeded)&&typeof IntersectionObserver<"u"&&(Element.prototype.scrollIntoViewIfNeeded=la);var aa=K('<p class="p-2 text-cyan-500"><i class="fa-solid fa-circle-info text-2xl"></i> Make sure members can read and send messages in <span class="font-mono"> </span>.</p>'),sa=K('<p class="p-2 text-cyan-500"><i class="fa-solid fa-circle-info text-2xl"></i> Make sure members can read but not send messages in <span class="font-mono"> </span>.</p>'),na=K(' <option class="p-1"> </option>',1),ia=K('<i class="fa-solid fa-spinner animate-spin"></i>'),ra=K('<h1 class="m-4 text-center text-4xl font-bold">Create a panel</h1> <div class="m-2 mx-auto max-w-3xl sm:p-4"><!> <div class="rounded-xl bg-white p-4 shadow-sm dark:bg-slate-700"><div class="text-center"><!></div> <form class="my-4 text-lg"><div class="grid grid-cols-1 gap-4 md:grid-cols-2"><div><label><span class="font-medium">Type</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="How will members use the panel?"></i> <select class="input form-multiselect font-normal" required><option class="p-1">Buttons</option><option class="p-1">Select menu (dropdown)</option></select></label></div> <div><label class="font-medium"><span class="font-medium">Channel</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="The channel to send the panel message to"></i> <select required class="input form-multiselect font-normal"><option>Create a new channel</option><hr><!></select></label></div> <div><label class="font-medium"><span class="font-medium">Categories</span> <!> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="The category options to be available"></i> <!></label></div> <div><label><span class="font-medium">Title</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="The embed title"></i> <input type="text" class="input form-input" required></label></div> <div><label><span class="font-medium">Large image</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Optional - the embed image"></i> <input type="url" class="input form-input"></label></div> <div><label><span class="font-medium">Small image (thumbnail)</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Optional - the embed thumbnail"></i> <input type="url" class="input form-input"></label></div> <div><label class="font-medium"><span class="font-medium">Description</span> <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Optional - the embed description"></i> <textarea class="input form-input h-24" maxlength="4096"></textarea></label></div> <div class="place-self-center"><button type="submit" class="mt-4 rounded-lg bg-green-300 p-2 px-5 font-medium transition duration-300 hover:bg-green-500 hover:text-white disabled:cursor-not-allowed dark:bg-green-500/50 dark:hover:bg-green-500 dark:hover:text-white"><!> Create</button></div></div></form></div> <div class="mx-auto mt-8 max-w-lg text-center text-base"><div class="rounded-xl border-2 border-cyan-500 bg-cyan-500/20 p-2"><i class="fa-solid fa-circle-info text-2xl text-cyan-500"></i> <br> Looking to edit or remove a panel? Just delete the message or channel in Discord.</div></div></div>',1);function Ua(n,e){At(e,!0);const[i,r]=al(),u=()=>ll(Cl,"$page",i);let d=e.data,M=Ie(d.categories),P=ht(Ie(d.channels));J(P,Ie(a(P).filter(c=>c.type===0)));let le=ht(null),z=ht(!1),b=Ie({categories:[],channel:"new",description:"",image:"",title:"",type:"BUTTON",thumbnail:""}),re=ht(Ie([]));const U=M.reduce((c,k)=>(c[(kl.get(k.emoji)??"")+k.name]=k.id,c),{}),oe=c=>{var k;return(k=a(P).find(ee=>ee.id===c))==null?void 0:k.name},pe=async()=>{try{J(z,!0);const c={...b};c.channel==="new"&&(c.channel=null),c.categories=a(re).map(G=>U[G]);const k=`/api/admin/guilds/${u().params.guild}/panels`,ee=await fetch(k,{method:"POST",body:JSON.stringify(c),credentials:"include",headers:{"Content-Type":"application/json; charset=UTF-8"}}),ge=await ee.json();if(ee.ok)window.location="./";else throw ge}catch(c){J(z,!1),J(le,Ie(c)),window.scroll({top:0,behavior:"smooth"})}};Ol(()=>{b.type=b.categories.length>5?"MENU":b.categories.length>1&&b.type==="MESSAGE"?"BUTTON":b.type});var B=ra(),L=y(te(B),2),ce=p(L);{var Ue=c=>{Tl(c,{get error(){return a(le)}})};$(ce,c=>{a(le)&&c(Ue)})}var V=y(ce,2),Ae=p(V),he=p(Ae);{var be=c=>{var k=aa(),ee=y(p(k),2),ge=p(ee);h(ee),tt(),h(k),I(G=>Ee(ge,`#${G??""}`),[()=>oe(b.channel)]),w(c,k)},_t=c=>{var k=me(),ee=te(k);{var ge=G=>{var Oe=sa(),Fe=y(p(Oe),2),Qe=p(Fe);h(Fe),tt(),h(Oe),I(fe=>Ee(Qe,`#${fe??""}`),[()=>oe(b.channel)]),w(G,Oe)};$(ee,G=>{b.channel!=="new"&&b.type!=="MESSAGE"&&G(ge)},!0)}w(c,k)};$(he,c=>{b.channel!=="new"&&b.type==="MESSAGE"?c(be):c(_t,!1)})}h(Ae);var Ve=y(Ae,2),yt=Le(()=>Nt(()=>pe())),_e=p(Ve),He=p(_e),nt=p(He),We=y(p(nt),4),Be=p(We);Be.value=(Be.__value="BUTTON")==null?"":"BUTTON";var it=y(Be);it.value=(it.__value="MENU")==null?"":"MENU",h(We),h(nt),h(He);var Ze=y(He,2),rt=p(Ze),Pe=y(p(rt),4),H=p(Pe);H.value=(H.__value="new")==null?"":"new";var Se=y(H,2);Tt(Se,17,()=>a(P),tl,(c,k)=>{tt();var ee=na(),ge=te(ee),G=y(ge),Oe={},Fe=p(G,!0);h(G),I(()=>{Ee(ge,`${a(k).id??""} `),Oe!==(Oe=a(k).id)&&(G.value=(G.__value=a(k).id)==null?"":a(k).id),Ee(Fe,a(k).name)}),w(c,ee)}),h(Pe),h(rt),h(Ze);var x=y(Ze,2),Ge=p(x),ot=y(p(Ge),2);Ml(ot);var wt=y(ot,4);const ze=Le(()=>b.type==="MENU"?25:5),ye=Le(()=>Object.keys(U));ta(wt,{outerDivClass:"text-base my-1 p-2 rounded-md border-transparent bg-gray-100 dark:bg-slate-800 font-normal shadow-sm transition-colors has-[:focus]:ring-2 has-[:focus]:ring-blurple",inputClass:"p-0 rounded-md bg-transparent transition-colors border-0 focus:ring-0",ulSelectedClass:"bg-gray-100 dark:bg-slate-800 text-gray-800 dark:text-slate-300",liSelectedClass:"bg-blurple text-white text-sm font-semibold font-mono",ulOptionsClass:"bg-white dark:bg-slate-900 p-2 max-h-48 overflow-y-auto",liOptionClass:"rounded-md",liActiveOptionClass:"bg-blurple text-white",liUserMsgClass:"text-red-700 dark:text-red-500 bg-red-400/40 dark:bg-red-500/20",liActiveUserMsgClass:"",maxSelectMsgClass:"text-xs",noMatchingOptionsMsg:"Create a category in the categories section",required:!0,get maxSelect(){return a(ze)},get options(){return a(ye)},get selected(){return a(re)},set selected(c){J(re,Ie(c))}}),h(Ge),h(x);var W=y(x,2),De=p(W),ct=y(p(De),4);at(ct),h(De),h(W);var je=y(W,2),dt=p(je),Xe=y(p(dt),4);at(Xe),h(dt),h(je);var Ye=y(je,2),ut=p(Ye),Ke=y(p(ut),4);at(Ke),h(ut),h(Ye);var Z=y(Ye,2),ft=p(Z),N=y(p(ft),4);xl(N),h(ft),h(Z);var o=y(Z,2),we=p(o),mt=p(we);{var xt=c=>{var k=ia();w(c,k)};$(mt,c=>{a(z)&&c(xt)})}tt(),h(we),h(o),h(_e),h(Ve),h(V),tt(2),h(L),I(()=>{Be.disabled=b.categories.length>5,we.disabled=a(z)}),f("submit",Ve,function(...c){var k;(k=a(yt))==null||k.apply(this,c)}),Wt(We,()=>b.type,c=>b.type=c),Wt(Pe,()=>b.channel,c=>b.channel=c),lt(ct,()=>b.title,c=>b.title=c),lt(Xe,()=>b.image,c=>b.image=c),lt(Ke,()=>b.thumbnail,c=>b.thumbnail=c),lt(N,()=>b.description,c=>b.description=c),w(n,B),Dt(),r()}export{Ua as component,La as universal};
