import{e as ye}from"../chunks/Cxx9n8vM.js";import"../chunks/Bzak7iHL.js";import{o as ke}from"../chunks/BAc9Nw6w.js";import{aU as we,p as Be,U as Ue,i as a,h as T,t as w,aY as Ae,aV as g,a as c,b as je,c as r,r as o,aZ as Ie,j as te,s as i,f as v,d as B,g as d,u as Ce}from"../chunks/CWXCXDbJ.js";import{s as N}from"../chunks/BTVB6o0Y.js";import{i as h}from"../chunks/BnKh12PZ.js";import{r as Se,s as ae}from"../chunks/DNgBoiT1.js";import{b as re}from"../chunks/C43HmXkP.js";import{p as ze}from"../chunks/r2wwZTEc.js";import{s as Pe,a as Te}from"../chunks/DeGpVRd_.js";import{p as Ne}from"../chunks/C1qs7Jw1.js";import{b as Je}from"../chunks/B4jARqj1.js";import{E as Oe}from"../chunks/CZwjNc88.js";async function qe({fetch:U,params:u}){var l;const f=await U(`/api/admin/guilds/${u.guild}/customization`),x=(l=f.headers.get("Content-Type"))==null?void 0:l.includes("json"),b=x?await f.json():await f.text();if(!f.ok)ye(f.status,x?JSON.stringify(b):b);else return b||{}}const st=Object.freeze(Object.defineProperty({__proto__:null,load:qe},Symbol.toStringTag,{value:"Module"}));var De=v('<div class="mb-4 rounded-lg bg-green-100 p-4 text-green-800 dark:bg-green-500/20 dark:text-green-300"><i class="fa-solid fa-check-circle"></i> </div>'),Ge=v('<img alt="Bot Avatar" class="h-32 w-32 rounded-full border-2 border-blurple"/> <button type="button" class="rounded-lg bg-red-300 p-2 px-4 font-medium transition duration-300 hover:bg-red-500 hover:text-white dark:bg-red-500/50 dark:hover:bg-red-500 dark:hover:text-white"><i class="fa-solid fa-trash"></i> Remove Avatar</button>',1),Le=v('<div class="flex h-32 w-32 items-center justify-center rounded-full border-2 border-dashed border-gray-300 bg-gray-50 dark:border-slate-600 dark:bg-slate-800"><i class="fa-solid fa-image text-4xl text-gray-300 dark:text-slate-600"></i></div>'),Me=v('<img alt="Bot Banner" class="w-full rounded-lg border-2 border-blurple object-cover" style="max-height: 200px;"/> <button type="button" class="rounded-lg bg-red-300 p-2 px-4 font-medium transition duration-300 hover:bg-red-500 hover:text-white dark:bg-red-500/50 dark:hover:bg-red-500 dark:hover:text-white"><i class="fa-solid fa-trash"></i> Remove Banner</button>',1),Re=v('<div class="flex w-full items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 py-12 dark:border-slate-600 dark:bg-slate-800"><i class="fa-solid fa-image text-4xl text-gray-300 dark:text-slate-600"></i></div>'),Ee=v('<i class="fa-solid fa-spinner animate-spin"></i>'),Fe=v('<i class="fa-solid fa-save"></i>'),Ve=v(`<h1 class="m-4 text-center text-4xl font-bold">Bot Customization</h1> <div class="m-2 mx-auto max-w-lg p-4 text-lg"><!> <!> <div class="mb-8 text-center text-blue-600 dark:text-blue-400"><p class="font-semibold"><i class="fa-solid fa-info-circle"></i> Per-Server Settings</p> <p>Customize the bot's appearance for this server. These settings will override the bot's default
			appearance when it interacts in this server.</p></div> <form><div class="my-4 grid grid-cols-1 gap-8"><div><label for="botAvatarInput" class="font-medium">Bot Avatar <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Upload a custom avatar for the bot in this server (PNG, JPG, max 1MB)"></i></label> <div class="mt-2 flex flex-col items-center gap-4"><!> <input id="botAvatarInput" type="file" accept="image/*" class="max-w-xs"/></div></div> <div><label for="botUsernameInput" class="font-medium">Bot Username <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Custom username for the bot in this server (max 80 characters)"></i></label> <input id="botUsernameInput" type="text" class="input form-input mt-2" placeholder="Leave blank to use default" maxlength="80"/> <p class="mt-1 text-sm text-gray-500 dark:text-slate-400"> </p></div> <div><label for="botBioInput" class="font-medium">Bot Description <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Custom description or bio for the bot in this server"></i></label> <textarea id="botBioInput" class="input form-textarea mt-2" placeholder="Leave blank to use default description" rows="4" maxlength="500"></textarea> <p class="mt-1 text-sm text-gray-500 dark:text-slate-400"> </p></div> <div><div class="font-medium"><label for="botBannerInput">Bot Banner <i class="fa-solid fa-circle-question cursor-help text-gray-500 dark:text-slate-400" title="Upload a custom banner for the bot in this server (PNG, JPG, recommended 1200x600px)"></i></label></div> <div class="mt-2 flex flex-col items-center gap-4"><!> <input id="botBannerInput" type="file" accept="image/*" class="max-w-xs"/></div></div></div> <div class="mt-8 flex gap-4"><button type="submit" class="flex-1 rounded-lg bg-green-300 p-2 px-5 font-medium transition duration-300 hover:bg-green-500 hover:text-white disabled:cursor-not-allowed disabled:opacity-50 dark:bg-green-500/50 dark:hover:bg-green-500 dark:hover:text-white"><!> Save Changes</button> <a href="../general" class="flex items-center justify-center rounded-lg bg-gray-300 p-2 px-5 font-medium transition duration-300 hover:bg-gray-500 hover:text-white dark:bg-slate-600 dark:hover:bg-slate-500"><i class="fa-solid fa-arrow-left"></i> Back</a></div></form></div>`,1);function it(U,u){var K,Q,W,X;Be(u,!0);const f=()=>Te(Ne,"$page",x),[x,b]=Pe();let l=B(!1),_=B(!1),y=B(null),p=B(""),s=Ue({botAvatar:((K=u.data)==null?void 0:K.botAvatar)||"",botBio:((Q=u.data)==null?void 0:Q.botBio)||"",botBanner:((W=u.data)==null?void 0:W.botBanner)||"",botUsername:((X=u.data)==null?void 0:X.botUsername)||""});Je(e=>{d(l)&&!confirm("You have unsaved changes; are you sure you want to leave?")&&e.cancel()}),ke(()=>{window.addEventListener("beforeunload",e=>{d(l)&&(e.preventDefault(),e.returnValue="")})});const J=async(e,t)=>{var $;const n=($=e.target.files)==null?void 0:$[0];if(!n)return;const m=new FileReader;m.onload=xe=>{var ee;const _e=(ee=xe.target)==null?void 0:ee.result;s[t]=_e,i(l,!0)},m.readAsDataURL(n)},O=e=>{s[e]="",i(l,!0)},oe=async()=>{try{i(y,null),i(p,""),i(_,!0);const e=await fetch(`/api/admin/guilds/${f().params.guild}/customization`,{method:"PATCH",body:JSON.stringify(s),credentials:"include",headers:{"Content-Type":"application/json; charset=UTF-8"}}),t=await e.json();if(e.ok)i(l,!1),i(p,"Bot customization saved successfully!"),setTimeout(()=>{i(p,"")},3e3);else throw t}catch(e){i(y,e,!0),window.scroll({top:0,behavior:"smooth"})}finally{i(_,!1)}};var q=Ve(),D=a(T(q),2),G=r(D);{var se=e=>{Oe(e,{get error(){return d(y)}})};h(G,e=>{d(y)&&e(se)})}var L=a(G,2);{var ie=e=>{var t=De(),n=a(r(t));o(t),w(()=>N(n,` ${d(p)??""}`)),c(e,t)};h(L,e=>{d(p)&&e(ie)})}var k=a(L,4),le=Ce(()=>ze(()=>oe())),A=r(k),j=r(A),M=a(r(j),2),R=r(M);{var ne=e=>{var t=Ge(),n=T(t),m=a(n,2);w(()=>ae(n,"src",s.botAvatar)),g("click",m,()=>O("botAvatar")),c(e,t)},de=e=>{var t=Le();c(e,t)};h(R,e=>{s.botAvatar?e(ne):e(de,!1)})}var ce=a(R,2);o(M),o(j);var I=a(j,2),C=a(r(I),2);Se(C);var E=a(C,2),ve=r(E);o(E),o(I);var S=a(I,2),z=a(r(S),2);Ie(z);var F=a(z,2),ue=r(F);o(F),o(S);var V=a(S,2),Y=a(r(V),2),H=r(Y);{var fe=e=>{var t=Me(),n=T(t),m=a(n,2);w(()=>ae(n,"src",s.botBanner)),g("click",m,()=>O("botBanner")),c(e,t)},me=e=>{var t=Re();c(e,t)};h(H,e=>{s.botBanner?e(fe):e(me,!1)})}var be=a(H,2);o(Y),o(V),o(A);var Z=a(A,2),P=r(Z),pe=r(P);{var ge=e=>{var t=Ee();c(e,t)},he=e=>{var t=Fe();c(e,t)};h(pe,e=>{d(_)?e(ge):e(he,!1)})}te(),o(P),te(2),o(Z),o(k),o(D),w(()=>{var e,t;N(ve,`${(((e=s.botUsername)==null?void 0:e.length)||0)??""}/80`),N(ue,`${(((t=s.botBio)==null?void 0:t.length)||0)??""}/500`),P.disabled=!d(l)||d(_)}),Ae("submit",k,function(...e){var t;(t=d(le))==null||t.apply(this,e)}),g("change",k,()=>i(l,!0)),g("change",ce,e=>J(e,"botAvatar")),re(C,()=>s.botUsername,e=>s.botUsername=e),re(z,()=>s.botBio,e=>s.botBio=e),g("change",be,e=>J(e,"botBanner")),c(U,q),je(),b()}we(["change","click"]);export{it as component,st as universal};
