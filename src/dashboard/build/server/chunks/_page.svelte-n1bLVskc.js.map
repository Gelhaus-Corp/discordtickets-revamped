{"version":3,"file":"_page.svelte-n1bLVskc.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/settings/_guild_/transcripts/_page.svelte.js"],"sourcesContent":["import { d as attr, f as ensure_array_like } from \"../../../../../chunks/index2.js\";\nimport { e as escape_html } from \"../../../../../chunks/escaping.js\";\nimport \"@sveltejs/kit/internal\";\nimport \"../../../../../chunks/url.js\";\nimport \"../../../../../chunks/utils.js\";\nimport \"@sveltejs/kit/internal/server\";\nimport \"../../../../../chunks/root.js\";\nimport \"../../../../../chunks/exports.js\";\nimport \"../../../../../chunks/state.svelte.js\";\nfunction _page($$renderer, $$props) {\n  $$renderer.component(($$renderer2) => {\n    let { data } = $$props;\n    let searchQuery = \"\";\n    let sortBy = \"date\";\n    let isLoading = false;\n    let searchResults = [];\n    let totalResults = 0;\n    const formatDuration = (start, end) => {\n      if (!start || !end) return \"N/A\";\n      const ms = new Date(end) - new Date(start);\n      const hours = Math.floor(ms / 36e5);\n      const minutes = Math.floor(ms % 36e5 / 6e4);\n      return `${hours}h ${minutes}m`;\n    };\n    $$renderer2.push(`<h1 class=\"m-4 text-center text-4xl font-bold\">Ticket Transcripts &amp; Archives</h1> <div class=\"mx-auto my-8 max-w-6xl px-4\"><div class=\"grid grid-cols-1 gap-4 md:grid-cols-2 mb-8\"><div class=\"rounded-lg bg-white p-6 shadow-sm dark:bg-slate-700\"><div class=\"text-sm font-semibold text-gray-600 dark:text-slate-400\">Results Found</div> <div class=\"mt-2 text-3xl font-bold\">${escape_html(totalResults)}</div></div> <div class=\"rounded-lg bg-white p-6 shadow-sm dark:bg-slate-700\"><div class=\"text-sm font-semibold text-gray-600 dark:text-slate-400\">Status <i class=\"fa-solid fa-circle-question cursor-help text-gray-400 text-sm\" title=\"Search status\"></i></div> <div class=\"mt-2 text-3xl font-bold\">`);\n    {\n      $$renderer2.push(\"<!--[!-->\");\n      $$renderer2.push(`Waiting for search`);\n    }\n    $$renderer2.push(`<!--]--></div></div></div> <div class=\"mb-8 rounded-lg bg-white p-6 shadow-sm dark:bg-slate-700\"><div class=\"grid grid-cols-1 gap-4 md:grid-cols-3\"><div class=\"md:col-span-2\"><label class=\"block text-sm font-semibold mb-2\">Search Transcripts</label> <input type=\"text\" placeholder=\"Search by topic, user ID, or ticket ID...\" class=\"w-full rounded-lg border border-gray-200 bg-white px-4 py-2 dark:border-gray-600 dark:bg-slate-800\"${attr(\"value\", searchQuery)}/> <p class=\"text-xs text-gray-500 dark:text-slate-400 mt-2\">Press Enter or click Search to find transcripts (up to 20 results)</p></div> <div><label class=\"block text-sm font-semibold mb-2\">Sort By</label> `);\n    $$renderer2.select(\n      {\n        class: \"w-full rounded-lg border border-gray-200 bg-white px-4 py-2 dark:border-gray-600 dark:bg-slate-800\",\n        value: sortBy\n      },\n      ($$renderer3) => {\n        $$renderer3.option({ value: \"date\" }, ($$renderer4) => {\n          $$renderer4.push(`Date (Newest First)`);\n        });\n        $$renderer3.option({ value: \"duration\" }, ($$renderer4) => {\n          $$renderer4.push(`Duration (Longest First)`);\n        });\n      }\n    );\n    $$renderer2.push(`</div></div> <button${attr(\"disabled\", isLoading, true)} class=\"mt-4 rounded-lg bg-blurple px-6 py-2 font-medium text-white transition duration-300 hover:bg-blurple/80 disabled:opacity-50 disabled:cursor-not-allowed\">`);\n    {\n      $$renderer2.push(\"<!--[!-->\");\n      $$renderer2.push(`<i class=\"fa-solid fa-search mr-2\"></i> Search`);\n    }\n    $$renderer2.push(`<!--]--></button></div> `);\n    if (searchResults.length > 0) {\n      $$renderer2.push(\"<!--[1-->\");\n      $$renderer2.push(`<div class=\"space-y-4\"><div class=\"text-sm text-gray-600 dark:text-slate-400 mb-4\">Found ${escape_html(totalResults)} transcript${escape_html(\"s\")} (showing up to 20 results)</div> <!--[-->`);\n      const each_array = ensure_array_like(searchResults);\n      for (let $$index = 0, $$length = each_array.length; $$index < $$length; $$index++) {\n        let transcript = each_array[$$index];\n        $$renderer2.push(`<div class=\"rounded-lg border border-gray-200 p-4 dark:border-gray-700\"><div class=\"flex flex-col md:flex-row md:items-center md:justify-between mb-3\"><div class=\"flex-1\"><div class=\"font-semibold text-lg\"><i class=\"fa-solid fa-hashtag text-gray-500 dark:text-slate-400\"></i> ${escape_html(transcript.topic || `Ticket ${transcript.id}`)}</div> <div class=\"text-sm text-gray-600 dark:text-slate-400\">ID: ${escape_html(transcript.id)} `);\n        if (transcript.userId) {\n          $$renderer2.push(\"<!--[-->\");\n          $$renderer2.push(`<span class=\"ml-4\"><i class=\"fa-solid fa-user\"></i> ${escape_html(transcript.userId)}</span>`);\n        } else {\n          $$renderer2.push(\"<!--[!-->\");\n        }\n        $$renderer2.push(`<!--]--></div></div> <div class=\"mt-2 md:mt-0 text-right\"><div class=\"text-sm font-medium text-gray-600 dark:text-slate-400\">`);\n        if (transcript.createdAt) {\n          $$renderer2.push(\"<!--[-->\");\n          $$renderer2.push(`${escape_html(new Date(transcript.createdAt).toLocaleDateString())}\n\t\t\t\t\t\t\t\t\t${escape_html(new Date(transcript.createdAt).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }))}`);\n        } else {\n          $$renderer2.push(\"<!--[!-->\");\n        }\n        $$renderer2.push(`<!--]--></div></div></div> <div class=\"flex flex-wrap gap-2 mb-4\"><div class=\"inline-flex items-center gap-2 rounded-full bg-gray-100 px-3 py-1 text-sm dark:bg-gray-800\"><i class=\"fa-solid fa-clock\"></i> Duration: ${escape_html(formatDuration(transcript.createdAt, transcript.closedAt))}</div> <div class=\"inline-flex items-center gap-2 rounded-full bg-gray-100 px-3 py-1 text-sm dark:bg-gray-800\"><i class=\"fa-solid fa-database\"></i> Size: ${escape_html((transcript.transcript?.length || 0 / 1024).toFixed(2))} KB</div> `);\n        if (transcript.status === \"CLOSED\") {\n          $$renderer2.push(\"<!--[-->\");\n          $$renderer2.push(`<div class=\"inline-flex items-center gap-2 rounded-full bg-red-100 px-3 py-1 text-sm text-red-700 dark:bg-red-900/30 dark:text-red-300\"><i class=\"fa-solid fa-check-circle\"></i> Closed</div>`);\n        } else {\n          $$renderer2.push(\"<!--[!-->\");\n        }\n        $$renderer2.push(`<!--]--></div> <div class=\"flex gap-2\"><button class=\"inline-flex items-center gap-2 rounded-lg bg-blue-300 px-4 py-2 font-medium transition duration-300 hover:bg-blue-500 hover:text-white dark:bg-blue-500/50 dark:hover:bg-blue-500\"><i class=\"fa-solid fa-download\"></i> Download HTML</button> <a${attr(\"href\", `/transcript/${transcript.id}`)} target=\"_blank\" rel=\"noopener noreferrer\" class=\"inline-flex items-center gap-2 rounded-lg bg-gray-300 px-4 py-2 font-medium transition duration-300 hover:bg-gray-500 hover:text-white dark:bg-gray-700 dark:hover:bg-gray-600\"><i class=\"fa-solid fa-external-link\"></i> View Online</a></div></div>`);\n      }\n      $$renderer2.push(`<!--]--></div>`);\n    } else {\n      $$renderer2.push(\"<!--[!-->\");\n      $$renderer2.push(`<div class=\"rounded-lg bg-white p-12 shadow-sm dark:bg-slate-700 text-center\"><i class=\"fa-solid fa-inbox text-6xl text-gray-400 dark:text-gray-600 mb-4\"></i> <p class=\"text-lg text-gray-600 dark:text-slate-400\">Enter a search query to find transcripts</p> <p class=\"text-sm text-gray-500 dark:text-slate-500 mt-2\">Search by ticket ID, topic, or user ID to view closed ticket transcripts</p></div>`);\n    }\n    $$renderer2.push(`<!--]--></div>`);\n  });\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":"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"}